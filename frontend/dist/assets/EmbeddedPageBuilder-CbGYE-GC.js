import{b as Me,u as Se,c as K,j as e}from"./vendor-query-Bq4hz6H9.js";import{r as b}from"./vendor-router-CdtyvhQv.js";import{a as B,g as _}from"./index-CtYfgeRr.js";import{a as c,T as a,C as T,h as w,c as y,W as Ie,b as R,M as H,Q as ce,l as V,B as te,g as x,I as J,aa as Oe,P as fe,a4 as _e,r as He,L as me,ab as N,ac as Re,ad as ye,ae as je,z as I,a9 as Qe,t as ue,v as Ne,af as Ge,ag as Ke,ah as Je,Z as Ve,e as A,f as Pe,G as pe,$ as ee}from"./vendor-polaris-CV39Dq-f.js";import"./vendor-react-N--QU9DW.js";import"./vendor-sentry-UzNpYtBG.js";import"./vendor-appbridge-DL6abzKC.js";function ve({label:i,active:o,onClick:f}){return e.jsx("button",{type:"button",onClick:f,style:{padding:"8px 16px",border:"none",borderBottom:o?"2px solid #008060":"2px solid transparent",backgroundColor:"transparent",color:o?"#202223":"#6d7175",fontWeight:o?600:400,cursor:"pointer",transition:"all 0.2s ease"},children:i})}const Fe=["png","jpg","jpeg","gif","webp","svg"],Ae=5*1024*1024;async function Xe(i,o){const f=new FormData;f.append("file",o);const l=`${`${_()}/page-builder/images/upload`}?shop=${i}`,h=await et(),r={};h&&(r.Authorization=`Bearer ${h}`),i&&(r["X-Shop-Domain"]=i);const k=await fetch(l,{method:"POST",headers:r,body:f});if(!k.ok){const n=await k.json();throw new Error(n.error||"Upload failed")}return k.json()}async function Ye(i){const o=await B(`${_()}/page-builder/images/list`,i);if(!o.ok)throw new Error("Failed to fetch images");return o.json()}async function Ze(i,o){const f=await B(`${_()}/page-builder/images/delete/${o}`,i,{method:"DELETE"});if(!f.ok){const U=await f.json();throw new Error(U.error||"Delete failed")}return f.json()}async function et(){try{const i=window.shopify;if(i?.idToken)return await i.idToken()}catch{}return null}function he({value:i,onChange:o,shop:f,label:U="Image",helpText:l,recommendedSize:h="1200 x 600 pixels",isBackground:r=!1}){const[k,n]=b.useState("upload"),[m,S]=b.useState(""),[j,D]=b.useState(null),[E,M]=b.useState(null),[W,C]=b.useState(!1),[X,L]=b.useState(!1),p=Me(),{data:F,isLoading:Y}=Se({queryKey:["page-builder-images",f],queryFn:()=>Ye(f),enabled:!!f&&(k==="library"||X)}),$=K({mutationFn:g=>Ze(f,g),onSuccess:()=>{p.invalidateQueries({queryKey:["page-builder-images",f]})}}),q=b.useCallback(g=>{const u=g.name.split(".").pop()?.toLowerCase();return!u||!Fe.includes(u)?`Invalid file type. Allowed: ${Fe.join(", ")}`:g.size>Ae?`File too large. Maximum size is ${Ae/(1024*1024)}MB`:null},[]),z=b.useCallback(async(g,u)=>{if(u.length===0){M("Please upload an image file (PNG, JPG, GIF, WebP, SVG)");return}const oe=u[0],le=q(oe);if(le){M(le);return}C(!0),M(null);try{const G=await Xe(f,oe);o(G.url),p.invalidateQueries({queryKey:["page-builder-images",f]})}catch(G){M(G instanceof Error?G.message:"Upload failed")}finally{C(!1)}},[f,o,q,p]),ge=b.useCallback(()=>{if(!m.trim()){D("Please enter a URL");return}try{new URL(m),o(m.trim()),D(null),S("")}catch{D("Please enter a valid URL")}},[m,o]),se=b.useCallback(g=>{o(g),L(!1)},[o]),Q=b.useCallback(()=>{o("")},[o]),Z=g=>g<1024?`${g} B`:g<1024*1024?`${(g/1024).toFixed(1)} KB`:`${(g/(1024*1024)).toFixed(1)} MB`,ne=()=>e.jsxs(c,{gap:"400",children:[E&&e.jsx(te,{tone:"critical",onDismiss:()=>M(null),children:E}),e.jsx(ce,{accept:"image/*",type:"image",onDrop:z,allowMultiple:!1,disabled:W,children:W?e.jsx(R,{padding:"800",children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(V,{size:"small"}),e.jsx(a,{as:"p",tone:"subdued",children:"Uploading..."})]})}):e.jsx(ce.FileUpload,{actionTitle:"Add image",actionHint:"or drop file to upload"})}),e.jsxs(a,{as:"p",variant:"bodySm",tone:"subdued",children:["Recommended size: ",h,". Max file size: 5MB. Supported formats: PNG, JPG, GIF, WebP, SVG."]})]}),ae=()=>e.jsxs(c,{gap:"400",children:[e.jsx(x,{label:"Image URL",value:m,onChange:S,placeholder:"https://example.com/image.png",error:j||void 0,autoComplete:"off",connectedRight:e.jsx(y,{onClick:ge,children:"Apply"})}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Enter a direct link to an image. Make sure the URL is publicly accessible."})]}),ie=()=>e.jsx(c,{gap:"400",children:Y?e.jsx(R,{padding:"400",children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(V,{size:"small"}),e.jsx(a,{as:"p",tone:"subdued",children:"Loading images..."})]})}):F?.images?.length===0?e.jsx(R,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(J,{source:Oe,tone:"subdued"}),e.jsx(a,{as:"p",tone:"subdued",alignment:"center",children:"No images uploaded yet. Upload an image to see it here."})]})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:F?.images?.map(g=>e.jsx("button",{type:"button",onClick:()=>se(g.url),style:{padding:"8px",border:i===g.url?"2px solid #008060":"2px solid #e1e3e5",borderRadius:"8px",backgroundColor:i===g.url?"#f0fdf4":"white",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},children:e.jsxs(c,{gap:"100",children:[e.jsx("div",{style:{width:"100%",aspectRatio:"1 / 1",borderRadius:"4px",overflow:"hidden",backgroundColor:"#f6f6f7"},children:e.jsx("img",{src:g.url,alt:g.filename,style:{width:"100%",height:"100%",objectFit:"cover"},onError:u=>{u.target.style.display="none"}})}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:Z(g.size)})]})},g.filename))})});return e.jsxs(c,{gap:"300",children:[e.jsx(a,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:U}),i&&e.jsx(T,{children:e.jsxs(c,{gap:"300",children:[e.jsx("div",{style:{width:"100%",maxHeight:"200px",borderRadius:"8px",overflow:"hidden",backgroundColor:"#f6f6f7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:i,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain"},onError:g=>{g.target.style.display="none"}})}),e.jsxs(w,{gap:"200",children:[e.jsx(y,{size:"slim",onClick:Q,tone:"critical",icon:Ie,children:"Remove"}),e.jsx(y,{size:"slim",onClick:()=>L(!0),children:"Change"})]}),i.length>60&&e.jsxs(a,{as:"p",variant:"bodySm",tone:"subdued",children:[i.substring(0,60),"..."]})]})}),!i&&e.jsxs(e.Fragment,{children:[e.jsx(R,{borderBlockEndWidth:"025",borderColor:"border",children:e.jsxs(w,{gap:"0",children:[e.jsx(ve,{label:"Upload",active:k==="upload",onClick:()=>n("upload")}),e.jsx(ve,{label:"URL",active:k==="url",onClick:()=>n("url")}),e.jsx(ve,{label:"Library",active:k==="library",onClick:()=>n("library")})]})}),e.jsxs(R,{paddingBlockStart:"200",children:[k==="upload"&&ne(),k==="url"&&ae(),k==="library"&&ie()]})]}),l&&e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:l}),e.jsx(H,{open:X,onClose:()=>L(!1),title:"Select Image",size:"large",children:e.jsx(H.Section,{children:e.jsxs(c,{gap:"400",children:[e.jsx(ce,{accept:"image/*",type:"image",onDrop:z,allowMultiple:!1,disabled:W,children:W?e.jsx(R,{padding:"400",children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(V,{size:"small"}),e.jsx(a,{as:"p",tone:"subdued",children:"Uploading..."})]})}):e.jsx(ce.FileUpload,{actionTitle:"Upload new image",actionHint:"or drop file to upload"})}),E&&e.jsx(te,{tone:"critical",onDismiss:()=>M(null),children:E}),Y?e.jsx(R,{padding:"400",children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(V,{size:"small"}),e.jsx(a,{as:"p",tone:"subdued",children:"Loading images..."})]})}):F?.images?.length===0?e.jsx(R,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsx(a,{as:"p",tone:"subdued",alignment:"center",children:"No images uploaded yet."})}):e.jsxs(e.Fragment,{children:[e.jsx(a,{as:"h3",variant:"headingSm",children:"Your Images"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:F?.images?.map(g=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>se(g.url),style:{width:"100%",padding:"8px",border:i===g.url?"2px solid #008060":"2px solid #e1e3e5",borderRadius:"8px",backgroundColor:i===g.url?"#f0fdf4":"white",cursor:"pointer",transition:"all 0.2s ease"},children:e.jsxs(c,{gap:"100",children:[e.jsx("div",{style:{width:"100%",aspectRatio:"1 / 1",borderRadius:"4px",overflow:"hidden",backgroundColor:"#f6f6f7"},children:e.jsx("img",{src:g.url,alt:g.filename,style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:Z(g.size)})]})}),e.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),confirm("Delete this image?")&&$.mutate(g.filename)},style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",borderRadius:"50%",border:"none",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},title:"Delete image",children:"x"})]},g.filename))})]})]})})})]})}const tt=[{type:"hero",label:"Hero Banner",description:"Large banner with title, subtitle, and CTA"},{type:"how_it_works",label:"How It Works",description:"Step-by-step explanation"},{type:"tier_comparison",label:"Membership Tiers",description:"Compare tier benefits"},{type:"rewards_catalog",label:"Rewards Catalog",description:"Display available rewards"},{type:"earning_rules",label:"Ways to Earn",description:"Show how to earn points"},{type:"faq",label:"FAQ Section",description:"Frequently asked questions"},{type:"referral_banner",label:"Referral Program",description:"Promote referral program"},{type:"cta",label:"Call to Action",description:"Final CTA with email signup"}],we={hero:"Hero Banner",how_it_works:"How It Works",tier_comparison:"Membership Tiers",rewards_catalog:"Rewards Catalog",earning_rules:"Ways to Earn",faq:"FAQ Section",referral_banner:"Referral Program",cta:"Call to Action"},st={hero:{title:"Join Our Rewards Program",subtitle:"Earn points on every purchase and unlock exclusive rewards",cta_text:"Join Now",cta_link:"/account",background_color:"#e85d27",text_color:"#ffffff"},how_it_works:{title:"How It Works",steps:[{title:"Sign Up",description:"Create your free account"},{title:"Earn Points",description:"Get points on every purchase"},{title:"Redeem Rewards",description:"Use points for discounts and perks"}]},tier_comparison:{title:"Membership Tiers",show_benefits:!0},rewards_catalog:{title:"Available Rewards",show_points_cost:!0},earning_rules:{title:"Ways to Earn",show_multipliers:!0},faq:{title:"Frequently Asked Questions",items:[{question:"How do I earn points?",answer:"You earn points on every purchase based on your membership tier."},{question:"When do my points expire?",answer:"Points expire 12 months after they are earned."}]},referral_banner:{title:"Refer Friends & Earn",description:"Share your referral link and earn bonus points when friends join"},cta:{title:"Ready to Start Earning?",subtitle:"Join thousands of members earning rewards today",button_text:"Create Account",button_url:"/account/register"}};async function nt(i){const o=await B(`${_()}/loyalty-page`,i);if(!o.ok)throw new Error("Failed to fetch page data");return o.json()}async function at(i){const o=await B(`${_()}/page-builder/templates`,i);if(!o.ok)throw new Error("Failed to fetch templates");return o.json()}async function it(i,o){const f=await B(`${_()}/page-builder/templates/${o}/apply`,i,{method:"POST"});if(!f.ok)throw new Error("Failed to apply template");return f.json()}async function ot(i,o){const f=await B(`${_()}/loyalty-page`,i,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!f.ok)throw new Error("Failed to save draft");return f.json()}async function lt(i){const o=await B(`${_()}/loyalty-page/publish`,i,{method:"POST"});if(!o.ok)throw new Error("Failed to publish page");return o.json()}async function rt(i){const o=await B(`${_()}/loyalty-page/unpublish`,i,{method:"POST"});if(!o.ok)throw new Error("Failed to unpublish page");return o.json()}async function dt(i){const o=await B(`${_()}/loyalty-page/discard-draft`,i,{method:"POST"});if(!o.ok)throw new Error("Failed to discard draft");return o.json()}const O={width:375,height:667,label:"iPhone SE"};function mt({shop:i}){const[o,f]=b.useState(0),[U,l]=b.useState(!1),[h,r]=b.useState("desktop"),[k,n]=b.useState(null),[m,S]=b.useState(!1),[j,D]=b.useState(!1),[E,M]=b.useState(null),[W,C]=b.useState(null),[X,L]=b.useState({past:[],present:null,future:[]}),[p,F]=b.useState(null),[Y,$]=b.useState(!1),q=Me(),{data:z,isLoading:ge,error:se}=Se({queryKey:["loyalty-page",i],queryFn:()=>nt(i),enabled:!!i});b.useEffect(()=>{z?.draft_config&&!p&&(F(z.draft_config),L({past:[],present:z.draft_config,future:[]}))},[z?.draft_config,p]);const Q=K({mutationFn:t=>ot(i,t),onSuccess:t=>{q.invalidateQueries({queryKey:["loyalty-page",i]}),$(!1),C("Draft saved successfully"),setTimeout(()=>C(null),3e3)},onError:()=>{C("Failed to save draft"),setTimeout(()=>C(null),3e3)}}),Z=K({mutationFn:()=>lt(i),onSuccess:()=>{q.invalidateQueries({queryKey:["loyalty-page",i]}),C("Page published successfully!"),setTimeout(()=>C(null),3e3)}}),ne=K({mutationFn:()=>rt(i),onSuccess:()=>{q.invalidateQueries({queryKey:["loyalty-page",i]}),C("Page unpublished"),setTimeout(()=>C(null),3e3)}}),ae=K({mutationFn:()=>dt(i),onSuccess:t=>{q.invalidateQueries({queryKey:["loyalty-page",i]}),t.draft_config&&F(t.draft_config),$(!1),C("Draft discarded"),setTimeout(()=>C(null),3e3)}}),{data:ie}=Se({queryKey:["page-builder-templates",i],queryFn:()=>at(i),enabled:!!i}),g=K({mutationFn:t=>it(i,t),onSuccess:t=>{q.invalidateQueries({queryKey:["loyalty-page",i]}),t.config&&(F(t.config),L({past:[],present:t.config,future:[]})),$(!0),D(!1),C("Template applied successfully! Remember to save your changes."),setTimeout(()=>C(null),5e3)},onError:()=>{C("Failed to apply template"),setTimeout(()=>C(null),3e3)}}),u=b.useCallback(t=>{L(d=>({past:d.present?[...d.past,d.present]:d.past,present:t,future:[]})),F(t),$(!0)},[]),oe=b.useCallback(()=>{L(t=>{if(t.past.length===0)return t;const d=t.past[t.past.length-1],v=t.past.slice(0,t.past.length-1);return F(d),$(!0),{past:v,present:d,future:t.present?[t.present,...t.future]:t.future}})},[]),le=b.useCallback(()=>{L(t=>{if(t.future.length===0)return t;const d=t.future[0],v=t.future.slice(1);return F(d),$(!0),{past:t.present?[...t.past,t.present]:t.past,present:d,future:v}})},[]),G=b.useCallback(t=>{if(!p)return;const d={id:`${t}_${Date.now()}`,type:t,enabled:!0,order:p.sections.length,settings:st[t]||{}};u({...p,sections:[...p.sections,d]}),S(!1)},[p,u]),De=b.useCallback(t=>{if(!p)return;const d=p.sections.filter(v=>v.id!==t).map((v,P)=>({...v,order:P}));u({...p,sections:d})},[p,u]),Ce=b.useCallback((t,d)=>{if(!p)return;const v=p.sections.map(P=>P.id===t?{...P,enabled:d}:P);u({...p,sections:v})},[p,u]),be=b.useCallback((t,d)=>{if(!p||t===d)return;const v=[...p.sections],[P]=v.splice(t,1);v.splice(d,0,P);const We=v.map(($e,qe)=>({...$e,order:qe}));u({...p,sections:We})},[p,u]),Ee=b.useCallback((t,d)=>{if(!p)return;const v=p.sections.map(P=>P.id===t?{...P,settings:{...P.settings,...d}}:P);u({...p,sections:v})},[p,u]),Le=t=>{M(t)},ze=(t,d)=>{t.preventDefault(),E!==null&&E!==d&&(be(E,d),M(d))},Be=()=>{M(null)},ke=b.useCallback(()=>{p&&Q.mutate(p)},[p,Q]);if(ge)return e.jsx(fe,{title:"Loyalty Page Builder",children:e.jsx(T,{children:e.jsxs(c,{gap:"400",inlineAlign:"center",children:[e.jsx(V,{size:"large"}),e.jsx(a,{as:"p",children:"Loading page builder..."})]})})});if(se)return e.jsx(fe,{title:"Loyalty Page Builder",children:e.jsx(te,{tone:"critical",children:e.jsx("p",{children:"Failed to load page builder. Please try again."})})});const s=p,xe=z?.page?.is_published||!1,re=Y||z?.has_unsaved_changes||!1,de=s?.sections?.filter(t=>t.enabled)?.sort((t,d)=>t.order-d.order)||[],Te=s?.sections?.filter(t=>!t.enabled)||[],Ue=[{id:"templates",content:"Templates",panelID:"templates-panel"},{id:"sections",content:"Sections",panelID:"sections-panel"},{id:"design",content:"Design",panelID:"design-panel"},{id:"settings",content:"Settings",panelID:"settings-panel"}];return e.jsxs(fe,{title:"Loyalty Page Builder",subtitle:"Customize your rewards program landing page",titleMetadata:xe?e.jsx(ue,{tone:"success",children:"Published"}):e.jsx(ue,{tone:"attention",children:"Draft"}),primaryAction:{content:"Publish",icon:He,onAction:()=>{Y&&Q.mutate(p),Z.mutate()},loading:Z.isPending,disabled:!s},secondaryActions:[{content:"Save Draft",onAction:ke,loading:Q.isPending,disabled:!re||!s},{content:"Preview",icon:_e,onAction:()=>l(!0)},...xe?[{content:"Unpublish",onAction:()=>ne.mutate(),loading:ne.isPending,destructive:!0}]:[]],children:[W&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(te,{tone:W.includes("Failed")?"critical":"success",onDismiss:()=>C(null),children:e.jsx("p",{children:W})})}),re&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(te,{tone:"warning",children:e.jsx("p",{children:"You have unsaved changes."})})}),e.jsxs(me,{children:[e.jsx(me.Section,{children:e.jsxs(T,{children:[e.jsx(R,{paddingBlockEnd:"400",children:e.jsxs(w,{gap:"200",blockAlign:"center",children:[e.jsx(N,{content:"Undo (Ctrl+Z)",children:e.jsx(y,{icon:Re,onClick:oe,disabled:X.past.length===0,accessibilityLabel:"Undo"})}),e.jsx(N,{content:"Redo (Ctrl+Y)",children:e.jsx(y,{icon:Re,onClick:le,disabled:X.future.length===0,accessibilityLabel:"Redo"})}),e.jsx("div",{style:{marginLeft:"16px",borderLeft:"1px solid #e0e0e0",paddingLeft:"16px"},children:e.jsxs(w,{gap:"100",blockAlign:"center",children:[e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:"Preview:"}),e.jsxs("div",{style:{display:"flex",background:"#f6f6f7",borderRadius:"8px",padding:"2px"},children:[e.jsx(N,{content:"Desktop preview",children:e.jsx("button",{onClick:()=>r("desktop"),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"32px",border:"none",borderRadius:"6px",cursor:"pointer",background:h==="desktop"?"#ffffff":"transparent",boxShadow:h==="desktop"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.15s ease"},"aria-label":"Desktop preview","aria-pressed":h==="desktop",children:e.jsx(J,{source:ye,tone:h==="desktop"?"base":"subdued"})})}),e.jsx(N,{content:"Mobile preview",children:e.jsx("button",{onClick:()=>r("mobile"),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"32px",border:"none",borderRadius:"6px",cursor:"pointer",background:h==="mobile"?"#ffffff":"transparent",boxShadow:h==="mobile"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.15s ease"},"aria-label":"Mobile preview","aria-pressed":h==="mobile",children:e.jsx(J,{source:je,tone:h==="mobile"?"base":"subdued"})})})]})]})}),e.jsx("div",{style:{flex:1}}),re&&e.jsx(y,{onClick:()=>ae.mutate(),tone:"critical",variant:"plain",loading:ae.isPending,children:"Discard Changes"})]})}),e.jsx(I,{}),e.jsxs(Qe,{tabs:Ue,selected:o,onSelect:f,children:[o===0&&e.jsx(R,{paddingBlockStart:"400",children:e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Choose a Template"}),e.jsx(a,{as:"p",variant:"bodyMd",tone:"subdued",children:"Start with a pre-built template and customize it to match your brand. Applying a template will replace your current page configuration."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:ie?.templates?.map(t=>e.jsx(T,{children:e.jsxs(c,{gap:"300",children:[e.jsxs("div",{style:{height:140,borderRadius:8,background:`linear-gradient(135deg, ${t.colors.primary} 0%, ${t.colors.secondary} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"60%",background:t.colors.background,borderTopLeftRadius:12,borderTopRightRadius:12}}),e.jsxs("div",{style:{position:"absolute",bottom:20,left:20,right:20,display:"flex",gap:8},children:[e.jsx("div",{style:{width:40,height:8,borderRadius:4,background:t.colors.accent}}),e.jsx("div",{style:{width:60,height:8,borderRadius:4,background:t.colors.secondary,opacity:.5}})]})]}),e.jsxs(c,{gap:"200",children:[e.jsxs(w,{align:"space-between",blockAlign:"center",children:[e.jsx(a,{as:"h4",variant:"headingSm",children:t.name}),p?.template===t.id&&e.jsx(ue,{tone:"success",children:"Current"})]}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:t.description})]}),e.jsx(w,{gap:"200",children:Object.entries(t.colors).map(([d,v])=>e.jsx(N,{content:d.charAt(0).toUpperCase()+d.slice(1),children:e.jsx("div",{style:{width:24,height:24,borderRadius:4,background:v,border:v==="#ffffff"||v==="#fafafa"||v==="#faf5ff"?"1px solid #ddd":"none"}})},d))}),e.jsxs(a,{as:"p",variant:"bodySm",tone:"subdued",children:[t.sections.length," sections included"]}),e.jsx(y,{fullWidth:!0,variant:p?.template===t.id?"secondary":"primary",onClick:()=>g.mutate(t.id),loading:g.isPending,disabled:p?.template===t.id,children:p?.template===t.id?"Currently Applied":"Apply Template"})]})},t.id))}),!ie?.templates?.length&&e.jsx(T,{children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(V,{size:"small"}),e.jsx(a,{as:"p",tone:"subdued",children:"Loading templates..."})]})})]})}),o===1&&e.jsx(R,{paddingBlockStart:"400",children:e.jsxs(c,{gap:"400",children:[e.jsxs(w,{align:"space-between",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Active Sections"}),e.jsx(y,{icon:Ne,onClick:()=>S(!0),children:"Add Section"})]}),e.jsx(a,{as:"p",variant:"bodyMd",tone:"subdued",children:"Drag sections to reorder. Click Edit to customize content."}),e.jsxs(c,{gap:"200",children:[de.map((t,d)=>e.jsx("div",{draggable:!0,onDragStart:()=>Le(d),onDragOver:v=>ze(v,d),onDragEnd:Be,style:{opacity:E===d?.5:1,cursor:"grab"},children:e.jsx(T,{children:e.jsxs(w,{align:"space-between",blockAlign:"center",children:[e.jsxs(w,{gap:"300",blockAlign:"center",children:[e.jsx("div",{style:{cursor:"grab"},children:e.jsx(J,{source:Ge,tone:"subdued"})}),e.jsxs(c,{gap:"100",children:[e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:we[t.type]||t.type}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:t.settings.title||"No title set"})]})]}),e.jsxs(w,{gap:"200",children:[e.jsx(N,{content:"Move up",children:e.jsx(y,{icon:Ke,size:"slim",onClick:()=>be(d,Math.max(0,d-1)),disabled:d===0,accessibilityLabel:"Move up"})}),e.jsx(N,{content:"Move down",children:e.jsx(y,{icon:Je,size:"slim",onClick:()=>be(d,Math.min(de.length-1,d+1)),disabled:d===de.length-1,accessibilityLabel:"Move down"})}),e.jsx(y,{icon:Ve,size:"slim",onClick:()=>n(t),children:"Edit"}),e.jsx(y,{size:"slim",tone:"critical",onClick:()=>Ce(t.id,!1),children:"Disable"})]})]})})},t.id)),de.length===0&&e.jsx(T,{children:e.jsxs(c,{gap:"200",inlineAlign:"center",children:[e.jsx(a,{as:"p",tone:"subdued",children:"No active sections"}),e.jsx(y,{onClick:()=>S(!0),children:"Add Your First Section"})]})})]}),Te.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx(a,{as:"h3",variant:"headingMd",children:"Disabled Sections"}),e.jsx(c,{gap:"200",children:Te.map(t=>e.jsx(T,{children:e.jsxs(w,{align:"space-between",blockAlign:"center",children:[e.jsx(c,{gap:"100",children:e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:we[t.type]||t.type})}),e.jsxs(w,{gap:"200",children:[e.jsx(y,{size:"slim",onClick:()=>Ce(t.id,!0),children:"Enable"}),e.jsx(y,{size:"slim",icon:Ie,tone:"critical",onClick:()=>De(t.id),accessibilityLabel:"Remove section"})]})]})},t.id))})]})]})}),o===2&&s&&e.jsx(R,{paddingBlockStart:"400",children:e.jsxs(c,{gap:"600",children:[e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Colors"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Click the color swatch to change colors. Changes apply to all sections in real-time."}),e.jsxs(A,{children:[e.jsxs(A.Group,{children:[e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Primary Color"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Used for hero backgrounds, buttons, and highlights"}),e.jsxs(w,{gap:"200",blockAlign:"center",children:[e.jsx("input",{type:"color",value:s.colors?.primary||"#e85d27",onChange:t=>u({...s,colors:{...s.colors,primary:t.target.value}}),style:{width:48,height:48,border:"2px solid #ddd",borderRadius:8,cursor:"pointer",padding:0}}),e.jsx(x,{label:"",labelHidden:!0,value:s.colors?.primary||"#e85d27",onChange:t=>u({...s,colors:{...s.colors,primary:t}}),autoComplete:"off",monospaced:!0})]})]}),e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Secondary Color"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Used for text and secondary elements"}),e.jsxs(w,{gap:"200",blockAlign:"center",children:[e.jsx("input",{type:"color",value:s.colors?.secondary||"#666666",onChange:t=>u({...s,colors:{...s.colors,secondary:t.target.value}}),style:{width:48,height:48,border:"2px solid #ddd",borderRadius:8,cursor:"pointer",padding:0}}),e.jsx(x,{label:"",labelHidden:!0,value:s.colors?.secondary||"#666666",onChange:t=>u({...s,colors:{...s.colors,secondary:t}}),autoComplete:"off",monospaced:!0})]})]})]}),e.jsxs(A.Group,{children:[e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Accent Color"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Used for icons, badges, and emphasis"}),e.jsxs(w,{gap:"200",blockAlign:"center",children:[e.jsx("input",{type:"color",value:s.colors?.accent||"#ffd700",onChange:t=>u({...s,colors:{...s.colors,accent:t.target.value}}),style:{width:48,height:48,border:"2px solid #ddd",borderRadius:8,cursor:"pointer",padding:0}}),e.jsx(x,{label:"",labelHidden:!0,value:s.colors?.accent||"#ffd700",onChange:t=>u({...s,colors:{...s.colors,accent:t}}),autoComplete:"off",monospaced:!0})]})]}),e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Background Color"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Page background color"}),e.jsxs(w,{gap:"200",blockAlign:"center",children:[e.jsx("input",{type:"color",value:s.colors?.background||"#ffffff",onChange:t=>u({...s,colors:{...s.colors,background:t.target.value}}),style:{width:48,height:48,border:"2px solid #ddd",borderRadius:8,cursor:"pointer",padding:0}}),e.jsx(x,{label:"",labelHidden:!0,value:s.colors?.background||"#ffffff",onChange:t=>u({...s,colors:{...s.colors,background:t}}),autoComplete:"off",monospaced:!0})]})]})]})]})]}),e.jsx(I,{}),e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Typography"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Choose fonts that match your brand. Changes apply to all text on the page."}),e.jsx(A,{children:e.jsxs(A.Group,{children:[e.jsx(Pe,{label:"Body Font",helpText:"Used for paragraphs and descriptions",options:[{label:"System Default",value:"system-ui"},{label:"Inter",value:"Inter"},{label:"Roboto",value:"Roboto"},{label:"Open Sans",value:"Open Sans"},{label:"Lato",value:"Lato"},{label:"Poppins",value:"Poppins"},{label:"Montserrat",value:"Montserrat"},{label:"Source Sans Pro",value:"Source Sans Pro"},{label:"Nunito",value:"Nunito"}],value:s.styles?.fontFamily||"system-ui",onChange:t=>u({...s,styles:{...s.styles,fontFamily:t}})}),e.jsx(Pe,{label:"Heading Font",helpText:"Used for titles and headings",options:[{label:"Same as Body",value:""},{label:"System Default",value:"system-ui"},{label:"Inter",value:"Inter"},{label:"Roboto",value:"Roboto"},{label:"Open Sans",value:"Open Sans"},{label:"Lato",value:"Lato"},{label:"Poppins",value:"Poppins"},{label:"Montserrat",value:"Montserrat"},{label:"Playfair Display",value:"Playfair Display"},{label:"Oswald",value:"Oswald"}],value:s.styles?.headingFontFamily||"",onChange:t=>u({...s,styles:{...s.styles,headingFontFamily:t}})})]})}),e.jsx(T,{children:e.jsxs(c,{gap:"200",children:[e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Preview"}),e.jsx("div",{style:{fontFamily:s.styles?.headingFontFamily||s.styles?.fontFamily||"system-ui, sans-serif",fontSize:"1.5rem",fontWeight:600},children:"Welcome to Our Rewards"}),e.jsx("div",{style:{fontFamily:s.styles?.fontFamily||"system-ui, sans-serif",fontSize:"1rem"},children:"Earn points on every purchase and unlock exclusive member benefits."})]})})]}),e.jsx(I,{}),e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Button Styles"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Customize how buttons appear across your loyalty page."}),e.jsx(A,{children:e.jsxs(A.Group,{children:[e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Button Shape"}),e.jsx("div",{style:{marginTop:8},children:e.jsx(pe,{title:"",titleHidden:!0,choices:[{label:"Square",value:"square"},{label:"Rounded",value:"rounded"},{label:"Pill",value:"pill"}],selected:[s.styles?.buttonStyle||"rounded"],onChange:t=>u({...s,styles:{...s.styles,buttonStyle:t[0]}})})})]}),e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Button Size"}),e.jsx("div",{style:{marginTop:8},children:e.jsx(pe,{title:"",titleHidden:!0,choices:[{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],selected:[s.styles?.buttonSize||"medium"],onChange:t=>u({...s,styles:{...s.styles,buttonSize:t[0]}})})})]})]})}),e.jsx(T,{children:e.jsxs(c,{gap:"200",children:[e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Preview"}),e.jsxs(w,{gap:"200",children:[e.jsx("button",{style:{background:s.colors?.primary||"#e85d27",color:"#ffffff",border:"none",padding:s.styles?.buttonSize==="small"?"8px 16px":s.styles?.buttonSize==="large"?"16px 32px":"12px 24px",borderRadius:s.styles?.buttonStyle==="square"?"0px":s.styles?.buttonStyle==="pill"?"999px":"8px",fontSize:s.styles?.buttonSize==="small"?"0.875rem":s.styles?.buttonSize==="large"?"1.125rem":"1rem",fontWeight:600,cursor:"pointer",fontFamily:s.styles?.fontFamily||"system-ui, sans-serif"},children:"Primary Button"}),e.jsx("button",{style:{background:"transparent",color:s.colors?.primary||"#e85d27",border:`2px solid ${s.colors?.primary||"#e85d27"}`,padding:s.styles?.buttonSize==="small"?"6px 14px":s.styles?.buttonSize==="large"?"14px 30px":"10px 22px",borderRadius:s.styles?.buttonStyle==="square"?"0px":s.styles?.buttonStyle==="pill"?"999px":"8px",fontSize:s.styles?.buttonSize==="small"?"0.875rem":s.styles?.buttonSize==="large"?"1.125rem":"1rem",fontWeight:600,cursor:"pointer",fontFamily:s.styles?.fontFamily||"system-ui, sans-serif"},children:"Secondary Button"})]})]})})]}),e.jsx(I,{}),e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Spacing & Layout"}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Control the spacing between sections and the overall page feel."}),e.jsx(A,{children:e.jsxs(A.Group,{children:[e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Section Spacing"}),e.jsx("div",{style:{marginTop:8},children:e.jsx(pe,{title:"",titleHidden:!0,choices:[{label:"Compact - Minimal spacing between sections",value:"compact"},{label:"Normal - Balanced spacing (recommended)",value:"normal"},{label:"Relaxed - More breathing room between sections",value:"relaxed"}],selected:[s.styles?.sectionSpacing||"normal"],onChange:t=>u({...s,styles:{...s.styles,sectionSpacing:t[0]}})})})]}),e.jsxs("div",{children:[e.jsx(a,{as:"p",variant:"bodyMd",children:"Corner Radius"}),e.jsx("div",{style:{marginTop:8},children:e.jsx(pe,{title:"",titleHidden:!0,choices:[{label:"None - Sharp corners",value:"none"},{label:"Small - Subtle rounding",value:"small"},{label:"Medium - Moderate rounding",value:"medium"},{label:"Large - Pronounced rounding",value:"large"}],selected:[s.styles?.borderRadius||"medium"],onChange:t=>u({...s,styles:{...s.styles,borderRadius:t[0]}})})})]})]})}),e.jsx(T,{children:e.jsxs(c,{gap:"200",children:[e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Preview"}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[1,2,3].map(t=>e.jsx("div",{style:{width:80,height:50,background:s.colors?.primary||"#e85d27",borderRadius:s.styles?.borderRadius==="none"?"0px":s.styles?.borderRadius==="small"?"4px":s.styles?.borderRadius==="large"?"16px":"8px",marginBottom:s.styles?.sectionSpacing==="compact"?"8px":s.styles?.sectionSpacing==="relaxed"?"24px":"16px"}},t))})]})})]})]})}),o===3&&s&&e.jsx(R,{paddingBlockStart:"400",children:e.jsxs(c,{gap:"400",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Page Settings"}),e.jsxs(A,{children:[e.jsx(ee,{label:"Enable loyalty page",helpText:"When enabled, the page is accessible at /apps/rewards",checked:s.enabled!==!1,onChange:t=>u({...s,enabled:t})}),e.jsx(x,{label:"Page Title",value:s.meta?.title||"Rewards Program",onChange:t=>u({...s,meta:{...s.meta,title:t}}),autoComplete:"off",helpText:"Shown in browser tab and search results"}),e.jsx(x,{label:"Meta Description",value:s.meta?.description||"",onChange:t=>u({...s,meta:{...s.meta,description:t}}),multiline:2,autoComplete:"off",helpText:"Description for search engines (max 160 characters)",maxLength:160,showCharacterCount:!0}),e.jsx(x,{label:"Custom CSS",value:s.custom_css||"",onChange:t=>u({...s,custom_css:t}),multiline:6,monospaced:!0,autoComplete:"off",helpText:"Add custom CSS to further customize your page styling"})]})]})})]})]})}),e.jsx(me.Section,{variant:"oneThird",children:e.jsxs(c,{gap:"400",children:[e.jsx(T,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(w,{align:"space-between",blockAlign:"center",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Live Preview"}),e.jsx(ue,{tone:h==="mobile"?"info":"success",children:h==="mobile"?O.label:"Desktop"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",background:"#f5f5f5",borderRadius:8,padding:h==="mobile"?"16px":"0",minHeight:400,overflow:"hidden"},children:h==="mobile"?e.jsxs("div",{style:{background:"#1a1a1a",borderRadius:"32px",padding:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"12px",left:"50%",transform:"translateX(-50%)",width:"80px",height:"24px",background:"#1a1a1a",borderRadius:"0 0 16px 16px",zIndex:10}}),e.jsx("div",{style:{width:`${O.width*.45}px`,height:`${O.height*.5}px`,borderRadius:"20px",overflow:"hidden",background:"#ffffff"},children:e.jsx("iframe",{src:`${_()}/loyalty-page/preview?viewport=mobile`,style:{width:`${O.width}px`,height:`${O.height}px`,border:"none",transform:"scale(0.45)",transformOrigin:"top left"},title:"Mobile Preview"})})]}):e.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,overflow:"hidden",width:"100%",height:400,background:"#ffffff"},children:e.jsx("iframe",{src:`${_()}/loyalty-page/preview`,style:{width:"200%",height:"200%",border:"none",transform:"scale(0.5)",transformOrigin:"top left"},title:"Desktop Preview"})})}),e.jsxs(w,{gap:"200",children:[e.jsx(y,{fullWidth:!0,onClick:()=>r("desktop"),icon:ye,variant:h==="desktop"?"primary":"secondary",size:"slim",children:"Desktop"}),e.jsx(y,{fullWidth:!0,onClick:()=>r("mobile"),icon:je,variant:h==="mobile"?"primary":"secondary",size:"slim",children:"Mobile"})]}),e.jsx(y,{fullWidth:!0,onClick:()=>l(!0),icon:_e,children:"Full Preview"})]})}),e.jsx(T,{children:e.jsxs(c,{gap:"300",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Quick Actions"}),e.jsx(y,{fullWidth:!0,url:"/apps/rewards",external:!0,disabled:!xe,children:"View Live Page"}),e.jsx(y,{fullWidth:!0,onClick:ke,disabled:!re,loading:Q.isPending,children:"Save Draft"})]})}),e.jsx(T,{children:e.jsxs(c,{gap:"300",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"Tips"}),e.jsxs(c,{gap:"200",children:[e.jsx(a,{as:"p",variant:"bodySm",children:"Keep your hero section compelling and action-oriented."}),e.jsx(a,{as:"p",variant:"bodySm",children:'Show 3-4 steps in "How It Works" for clarity.'}),e.jsx(a,{as:"p",variant:"bodySm",children:"Highlight your best rewards prominently."}),e.jsx(a,{as:"p",variant:"bodySm",children:"Include an FAQ to reduce support questions."})]})]})})]})})]}),e.jsx(H,{open:U,onClose:()=>l(!1),title:"Page Preview",size:"large",children:e.jsx(H.Section,{children:e.jsxs(c,{gap:"400",children:[e.jsxs(w,{align:"center",gap:"400",children:[e.jsx(a,{as:"span",variant:"bodyMd",children:"View as:"}),e.jsxs("div",{style:{display:"flex",background:"#f6f6f7",borderRadius:"8px",padding:"4px"},children:[e.jsxs("button",{onClick:()=>r("desktop"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer",background:h==="desktop"?"#ffffff":"transparent",boxShadow:h==="desktop"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.15s ease",fontWeight:h==="desktop"?600:400,color:h==="desktop"?"#202223":"#6d7175"},"aria-pressed":h==="desktop",children:[e.jsx(J,{source:ye,tone:h==="desktop"?"base":"subdued"}),"Desktop"]}),e.jsxs("button",{onClick:()=>r("mobile"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer",background:h==="mobile"?"#ffffff":"transparent",boxShadow:h==="mobile"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.15s ease",fontWeight:h==="mobile"?600:400,color:h==="mobile"?"#202223":"#6d7175"},"aria-pressed":h==="mobile",children:[e.jsx(J,{source:je,tone:h==="mobile"?"base":"subdued"}),"Mobile (",O.label,")"]})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",background:"#f5f5f5",borderRadius:8,padding:h==="mobile"?"24px":"0",minHeight:600},children:h==="mobile"?e.jsxs("div",{style:{background:"#1a1a1a",borderRadius:"44px",padding:"14px",boxShadow:"0 12px 48px rgba(0,0,0,0.25)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"14px",left:"50%",transform:"translateX(-50%)",width:"120px",height:"28px",background:"#1a1a1a",borderRadius:"0 0 20px 20px",zIndex:10}}),e.jsx("div",{style:{width:`${O.width}px`,height:`${O.height}px`,borderRadius:"30px",overflow:"hidden",background:"#ffffff"},children:e.jsx("iframe",{src:`${_()}/loyalty-page/preview?viewport=mobile`,style:{width:"100%",height:"100%",border:"none"},title:"Mobile Preview"})}),e.jsx("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",width:"100px",height:"4px",background:"#4a4a4a",borderRadius:"2px"}})]}):e.jsx("iframe",{src:`${_()}/loyalty-page/preview`,style:{width:"100%",height:"600px",border:"1px solid #e0e0e0",borderRadius:8,background:"#ffffff"},title:"Desktop Preview"})})]})})}),e.jsx(H,{open:m,onClose:()=>S(!1),title:"Add Section",children:e.jsx(H.Section,{children:e.jsx(c,{gap:"300",children:tt.map(t=>{const d=s?.sections?.some(v=>v.type===t.type);return e.jsx(T,{children:e.jsxs(w,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:t.label}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:t.description})]}),e.jsx(y,{size:"slim",onClick:()=>G(t.type),disabled:d,children:d?"Added":"Add"})]})},t.type)})})})}),k&&e.jsx(ct,{section:k,shop:i,onClose:()=>n(null),onSave:t=>{Ee(k.id,t),n(null)}})]})}function ct({section:i,shop:o,onClose:f,onSave:U}){const[l,h]=b.useState(i.settings),r=(n,m)=>{h(S=>({...S,[n]:m}))},k=()=>{switch(i.type){case"hero":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(x,{label:"Subtitle",value:l.subtitle||"",onChange:n=>r("subtitle",n),multiline:2,autoComplete:"off"}),e.jsx(x,{label:"CTA Button Text",value:l.cta_text||"",onChange:n=>r("cta_text",n),autoComplete:"off"}),e.jsx(x,{label:"CTA Button Link",value:l.cta_link||"",onChange:n=>r("cta_link",n),autoComplete:"off",helpText:"e.g., /account or /account/register"}),e.jsx(I,{}),e.jsx(a,{as:"h4",variant:"headingSm",children:"Background"}),e.jsx(he,{label:"Background Image",value:l.background_image||"",onChange:n=>r("background_image",n),shop:o,recommendedSize:"1920 x 600 pixels",helpText:"Optional. If set, will be used instead of background color.",isBackground:!0}),e.jsx(x,{label:"Background Color",value:l.background_color||"#e85d27",onChange:n=>r("background_color",n),autoComplete:"off",helpText:"Used when no background image is set"}),e.jsx(x,{label:"Text Color",value:l.text_color||"#ffffff",onChange:n=>r("text_color",n),autoComplete:"off"})]});case"how_it_works":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(I,{}),e.jsx(a,{as:"h4",variant:"headingSm",children:"Steps"}),(l.steps||[]).map((n,m)=>e.jsx(T,{children:e.jsxs(c,{gap:"200",children:[e.jsxs(w,{align:"space-between",children:[e.jsxs(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:["Step ",m+1]}),e.jsx(y,{size:"slim",tone:"critical",onClick:()=>{const S=l.steps.filter((j,D)=>D!==m);r("steps",S)},children:"Remove"})]}),e.jsx(he,{label:"Step Icon",value:n.icon_image||"",onChange:S=>{const j=[...l.steps];j[m]={...j[m],icon_image:S},r("steps",j)},shop:o,recommendedSize:"64 x 64 pixels",helpText:"Optional. Upload a custom icon for this step."}),e.jsx(x,{label:"Title",value:n.title||"",onChange:S=>{const j=[...l.steps];j[m]={...j[m],title:S},r("steps",j)},autoComplete:"off"}),e.jsx(x,{label:"Description",value:n.description||"",onChange:S=>{const j=[...l.steps];j[m]={...j[m],description:S},r("steps",j)},autoComplete:"off"})]})},m)),e.jsx(y,{onClick:()=>{const n=[...l.steps||[],{title:"",description:"",icon_image:""}];r("steps",n)},children:"Add Step"})]});case"faq":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(I,{}),e.jsx(a,{as:"h4",variant:"headingSm",children:"FAQ Items"}),(l.items||[]).map((n,m)=>e.jsx(T,{children:e.jsxs(c,{gap:"200",children:[e.jsxs(w,{align:"space-between",children:[e.jsxs(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:["Question ",m+1]}),e.jsx(y,{size:"slim",tone:"critical",onClick:()=>{const S=l.items.filter((j,D)=>D!==m);r("items",S)},children:"Remove"})]}),e.jsx(x,{label:"Question",value:n.question||"",onChange:S=>{const j=[...l.items];j[m]={...j[m],question:S},r("items",j)},autoComplete:"off"}),e.jsx(x,{label:"Answer",value:n.answer||"",onChange:S=>{const j=[...l.items];j[m]={...j[m],answer:S},r("items",j)},multiline:3,autoComplete:"off"})]})},m)),e.jsx(y,{onClick:()=>{const n=[...l.items||[],{question:"",answer:""}];r("items",n)},children:"Add FAQ Item"})]});case"tier_comparison":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(ee,{label:"Show tier benefits",checked:l.show_benefits!==!1,onChange:n=>r("show_benefits",n)}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Tiers are automatically loaded from your tier configuration."})]});case"rewards_catalog":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(ee,{label:"Show points cost",checked:l.show_points_cost!==!1,onChange:n=>r("show_points_cost",n)}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Rewards are automatically loaded from your rewards configuration."})]});case"earning_rules":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(ee,{label:"Show multipliers",checked:l.show_multipliers!==!1,onChange:n=>r("show_multipliers",n)}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Earning rules are automatically loaded from your points configuration."})]});case"referral_banner":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(x,{label:"Description",value:l.description||"",onChange:n=>r("description",n),multiline:2,autoComplete:"off"}),e.jsx(I,{}),e.jsx(he,{label:"Background Image",value:l.background_image||"",onChange:n=>r("background_image",n),shop:o,recommendedSize:"1200 x 400 pixels",helpText:"Optional. Adds a background image to the referral banner.",isBackground:!0})]});case"cta":return e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"}),e.jsx(x,{label:"Subtitle",value:l.subtitle||"",onChange:n=>r("subtitle",n),multiline:2,autoComplete:"off"}),e.jsx(x,{label:"Button Text",value:l.button_text||"",onChange:n=>r("button_text",n),autoComplete:"off"}),e.jsx(x,{label:"Button URL",value:l.button_url||"",onChange:n=>r("button_url",n),autoComplete:"off"}),e.jsx(ee,{label:"Show email signup form",checked:l.show_email_form===!0,onChange:n=>r("show_email_form",n)}),e.jsx(I,{}),e.jsx(he,{label:"Background Image",value:l.background_image||"",onChange:n=>r("background_image",n),shop:o,recommendedSize:"1200 x 400 pixels",helpText:"Optional. Adds a background image to the CTA section.",isBackground:!0})]});default:return e.jsx(x,{label:"Section Title",value:l.title||"",onChange:n=>r("title",n),autoComplete:"off"})}};return e.jsx(H,{open:!0,onClose:f,title:`Edit ${we[i.type]||i.type}`,primaryAction:{content:"Save",onAction:()=>U(l)},secondaryActions:[{content:"Cancel",onAction:f}],children:e.jsx(H.Section,{children:e.jsx(A,{children:k()})})})}export{mt as EmbeddedPageBuilder,mt as default};

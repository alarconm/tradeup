import{j as e,b as In,u as q,c as F}from"./vendor-query-Bq4hz6H9.js";import{r as d,u as Mn}from"./vendor-router-CdtyvhQv.js";import{u as $n,b as Nn,a as w,g as _}from"./index-B6-oWjXE.js";import{M as I,a2 as Dn,B as C,e as Ne,f as N,g as x,P as $e,b as c,h as i,l as U,L as f,C as v,a,T as s,$ as y,z as b,c as j,v as cn,R as Ln,w as On,t as T,V as h,a1 as se,a3 as qn,a4 as Un,k as Wn,I as _e,a5 as Bn,a6 as zn,a7 as Gn,S as Kn}from"./vendor-polaris-1WqYVNpP.js";import{u as Hn,S as Vn}from"./vendor-appbridge-DL6abzKC.js";import"./vendor-react-N--QU9DW.js";import"./vendor-sentry-UzNpYtBG.js";const Yn=[{label:"Bug Report",value:"bug"},{label:"Feature Request",value:"feature_request"},{label:"Question",value:"question"},{label:"Other",value:"other"}],Qn=[{label:"Low - Minor issue, workaround available",value:"low"},{label:"Medium - Affects workflow but manageable",value:"medium"},{label:"High - Significant impact on operations",value:"high"},{label:"Critical - Cannot use the app",value:"critical"}];function Jn({open:t,onClose:r}){const{showSuccess:p,showError:S}=$n(),[k,D]=d.useState(""),[L,de]=d.useState(""),[W,Q]=d.useState("bug"),[J,le]=d.useState("medium"),[ae,X]=d.useState(""),[Ce,ce]=d.useState(!1),[P,Z]=d.useState(!1),[ke,ue]=d.useState(""),R=d.useCallback(()=>{D(""),de(""),Q("bug"),le("medium"),X(""),Z(!1),ue("")},[]),K=d.useCallback(()=>{R(),r()},[r,R]),Te=d.useCallback(async()=>{if(!k.trim()){S("Please enter a title");return}if(!L.trim()){S("Please enter a description");return}ce(!0);try{const M={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,screenSize:`${window.screen.width}x${window.screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,url:window.location.href,timestamp:new Date().toISOString()},H=await Nn.post("/settings/bug-report",{title:k.trim(),description:L.trim(),category:W,severity:J,steps_to_reproduce:ae.trim(),browser_info:M});H.data.success?(ue(H.data.report_id),Z(!0),p("Bug report submitted successfully!")):S(H.data.error||"Failed to submit report")}catch(M){console.error("Error submitting bug report:",M),S("Failed to submit bug report. Please try again.")}finally{ce(!1)}},[k,L,W,J,ae,p,S]),he=()=>e.jsxs(Ne,{children:[e.jsx(N,{label:"Category",options:Yn,value:W,onChange:Q}),e.jsx(x,{label:"Title",value:k,onChange:D,placeholder:"Brief description of the issue",autoComplete:"off",maxLength:200}),e.jsx(x,{label:"Description",value:L,onChange:de,multiline:4,placeholder:"Please describe the issue in detail...",autoComplete:"off",maxLength:2e3}),W==="bug"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Severity",options:Qn,value:J,onChange:le,helpText:"How significantly does this affect your workflow?"}),e.jsx(x,{label:"Steps to Reproduce (Optional)",value:ae,onChange:X,multiline:3,placeholder:`1. Go to...
2. Click on...
3. Observe...`,autoComplete:"off",maxLength:1e3})]})]}),pe=()=>e.jsxs(Dn,{children:[e.jsx(C,{tone:"success",children:e.jsx("p",{children:"Thank you for your feedback!"})}),e.jsxs("p",{style:{marginTop:"16px"},children:["Your report has been submitted with reference ID: ",e.jsx("strong",{children:ke})]}),e.jsxs("p",{style:{marginTop:"8px"},children:["Our team will review your submission and get back to you if needed. You can contact us at"," ",e.jsx("a",{href:"mailto:mike@orbsportscards.com",children:"mike@orbsportscards.com"})," ","if you have any urgent issues."]})]});return e.jsx(I,{open:t,onClose:K,title:P?"Report Submitted":"Submit Feedback",primaryAction:P?{content:"Close",onAction:K}:{content:"Submit Report",onAction:Te,loading:Ce,disabled:!k.trim()||!L.trim()},secondaryActions:P?[{content:"Submit Another",onAction:R}]:[{content:"Cancel",onAction:K}],children:e.jsx(I.Section,{children:P?pe():he()})})}async function Xn(t){const r=await w(`${_()}/settings`,t);if(!r.ok)throw new Error("Failed to fetch settings");return r.json()}async function Zn(t,r,p){const S=r.replace(/_/g,"-"),k=r==="root"?"":`/${S}`,D=await w(`${_()}/settings${k}`,t,{method:"PATCH",body:JSON.stringify(p)});if(!D.ok)throw new Error("Failed to update settings");return D.json()}async function es(t){const r=await w(`${_()}/settings/segments`,t);if(!r.ok)throw new Error("Failed to fetch segments");return r.json()}async function ns(t){const r=await w(`${_()}/settings/segments/sync`,t,{method:"POST"});if(!r.ok)throw new Error("Failed to sync segments");return r.json()}async function ss(t){const r=await w(`${_()}/settings/products`,t);if(!r.ok)throw new Error("Failed to fetch products");return r.json()}async function as(t){const r=await w(`${_()}/settings/products/sync`,t,{method:"POST"});if(!r.ok)throw new Error("Failed to sync products");return r.json()}const ts=[{label:"Never expires",value:""},{label:"30 days",value:"30"},{label:"60 days",value:"60"},{label:"90 days",value:"90"},{label:"180 days",value:"180"},{label:"1 year (365 days)",value:"365"}];async function is(t){const r=await w(`${_()}/email/templates`,t);if(!r.ok)throw new Error("Failed to fetch templates");return r.json()}async function rs(t,r){const p=await w(`${_()}/email/preview`,t,{method:"POST",body:JSON.stringify({template_id:r})});if(!p.ok)throw new Error("Failed to preview template");return p.json()}async function os(t,r,p,S){const k=await w(`${_()}/email/send-test`,t,{method:"POST",body:JSON.stringify({template_id:r,to_email:p,to_name:S})});if(!k.ok)throw new Error("Failed to send test email");return k.json()}async function ds(t){const r=await w(`${_()}/members/tiers`,t);if(!r.ok)throw new Error("Failed to fetch tiers");return r.json()}async function ls(t,r=30){const p=await w(`${_()}/review-prompt/metrics?days=${r}`,t);if(!p.ok)throw new Error("Failed to fetch review metrics");return p.json()}async function cs(t,r){const p=await w(`${_()}/members/tiers`,t,{method:"POST",body:JSON.stringify(r)});if(!p.ok)throw new Error("Failed to create tier");return p.json()}async function us(t,r,p){const S=await w(`${_()}/members/tiers/${r}`,t,{method:"PUT",body:JSON.stringify(p)});if(!S.ok)throw new Error("Failed to update tier");return S.json()}async function hs(t,r){const p=await w(`${_()}/members/tiers/${r}`,t,{method:"DELETE"});if(!p.ok){const S=await p.json();throw new Error(S.error||"Failed to delete tier")}}const un={points_expiring:{label:"Points Expiring",description:"Remind members when their points are about to expire",icon:"clock"},tier_progress:{label:"Tier Progress",description:"Notify members when they are close to reaching the next tier",icon:"trending-up"},inactive_reminder:{label:"Inactive Re-engagement",description:"Re-engage members who have been inactive for a while",icon:"refresh"},trade_in_reminder:{label:"Trade-In Reminder",description:"Remind members to bring in items for trade-in",icon:"exchange"}};async function ps(t){const r=await w(`${_()}/nudges/configs`,t);if(!r.ok)throw new Error("Failed to fetch nudge configs");return r.json()}async function ms(t,r,p){const S=await w(`${_()}/nudges/configs/${r}`,t,{method:"PUT",body:JSON.stringify(p)});if(!S.ok)throw new Error("Failed to update nudge config");return S.json()}async function gs(t,r,p,S){const k=await w(`${_()}/nudges/test-send`,t,{method:"POST",body:JSON.stringify({nudge_type:r,to_email:p,to_name:S})});if(!k.ok)throw new Error("Failed to send test nudge");return k.json()}async function xs(t){const r=await w(`${_()}/scheduled-tasks/monthly-credits/preview`,t);if(!r.ok)throw new Error("Failed to fetch preview");return r.json()}async function bs(t){const r=await w(`${_()}/scheduled-tasks/monthly-credits/run`,t,{method:"POST"});if(!r.ok)throw new Error("Failed to run monthly credits");return r.json()}async function js(t,r=7){const p=await w(`${_()}/scheduled-tasks/expiration/upcoming?days=${r}`,t);if(!p.ok)throw new Error("Failed to fetch expiring credits");return p.json()}async function ys(t){const r=await w(`${_()}/scheduled-tasks/expiration/run`,t,{method:"POST"});if(!r.ok)throw new Error("Failed to run expiration");return r.json()}function Ts({shop:t}){const r=Mn(),p=In(),[S,k]=d.useState(!1),[D,L]=d.useState({}),[de,W]=d.useState(!1),Q=Hn(),{data:J,isLoading:le,error:ae}=q({queryKey:["settings",t],queryFn:()=>Xn(t),enabled:!!t}),{data:X,isLoading:Ce,refetch:ce}=q({queryKey:["segments",t],queryFn:()=>es(t),enabled:!!t}),P=F({mutationFn:()=>ns(t),onSuccess:()=>{p.invalidateQueries({queryKey:["segments"]})}}),{data:Z,isLoading:ke,refetch:ue}=q({queryKey:["membership-products",t],queryFn:()=>ss(t),enabled:!!t}),R=F({mutationFn:()=>as(t),onSuccess:()=>{p.invalidateQueries({queryKey:["membership-products"]})}}),{data:K,isLoading:Te}=q({queryKey:["tiers",t],queryFn:()=>ds(t),enabled:!!t}),[he,pe]=d.useState(!1),[M,H]=d.useState(null),[me,ge]=d.useState(null),[l,A]=d.useState({name:"",monthly_price:"9.99",yearly_price:"",bonus_rate:"0.05",discount_percent:"0",purchase_cashback_pct:"0",monthly_credit:"0",credit_expiration_days:"",free_shipping:!1,priority_support:!1,early_access:!1,exclusive_events:!1,signup_bonus:"0"}),[xe,B]=d.useState(""),be=d.useCallback(n=>{n?(H(n),A({name:n.name,monthly_price:String(n.monthly_price),yearly_price:n.yearly_price?String(n.yearly_price):"",bonus_rate:String((n.bonus_rate||0)*100),discount_percent:String(n.benefits?.discount_percent||0),purchase_cashback_pct:String(n.purchase_cashback_pct||0),monthly_credit:String(n.monthly_credit_amount||0),credit_expiration_days:n.credit_expiration_days?String(n.credit_expiration_days):"",free_shipping:n.benefits?.free_shipping||!1,priority_support:n.benefits?.priority_support||!1,early_access:n.benefits?.early_access||!1,exclusive_events:n.benefits?.exclusive_events||!1,signup_bonus:String(n.benefits?.signup_bonus||0)})):(H(null),A({name:"",monthly_price:"9.99",yearly_price:"",bonus_rate:"5",discount_percent:"0",purchase_cashback_pct:"0",monthly_credit:"0",credit_expiration_days:"",free_shipping:!1,priority_support:!1,early_access:!1,exclusive_events:!1,signup_bonus:"0"})),B(""),pe(!0)},[]),je=d.useCallback(()=>{pe(!1),H(null),B("")},[]),Ae=F({mutationFn:n=>cs(t,n),onSuccess:()=>{p.invalidateQueries({queryKey:["tiers"]}),je()},onError:n=>B(n.message)}),Ee=F({mutationFn:({id:n,data:m})=>us(t,n,m),onSuccess:()=>{p.invalidateQueries({queryKey:["tiers"]}),je()},onError:n=>B(n.message)}),De=F({mutationFn:n=>hs(t,n),onSuccess:()=>{p.invalidateQueries({queryKey:["tiers"]})},onError:n=>B(n.message)}),[Le,V]=d.useState(""),[Oe,te]=d.useState(""),{data:z,isLoading:qe,refetch:hn}=q({queryKey:["monthly-credits-preview",t],queryFn:()=>xs(t),enabled:!!t}),{data:ee,isLoading:Ue,refetch:pn}=q({queryKey:["expiring-credits",t],queryFn:()=>js(t,7),enabled:!!t}),We=F({mutationFn:()=>bs(t),onSuccess:n=>{V(n.message),te(""),p.invalidateQueries({queryKey:["monthly-credits-preview"]}),setTimeout(()=>V(""),5e3)},onError:n=>{te(n.message),V("")}}),Be=F({mutationFn:()=>ys(t),onSuccess:n=>{V(n.message),te(""),p.invalidateQueries({queryKey:["expiring-credits"]}),setTimeout(()=>V(""),5e3)},onError:n=>{te(n.message),V("")}}),{data:ze,isLoading:mn}=q({queryKey:["email-templates",t],queryFn:()=>is(t),enabled:!!t}),{data:Pe,isLoading:Ge,refetch:Ke}=q({queryKey:["nudge-configs",t],queryFn:()=>ps(t),enabled:!!t}),[gn,ye]=d.useState(!1),[ie,xn]=d.useState(null),[He,Ve]=d.useState(""),[Ye,Qe]=d.useState(""),[Je,re]=d.useState(""),[fe,G]=d.useState(""),Xe=F({mutationFn:({nudgeType:n,data:m})=>ms(t,n,m),onSuccess:()=>{p.invalidateQueries({queryKey:["nudge-configs"]}),re("Nudge settings updated"),setTimeout(()=>re(""),3e3)},onError:n=>{G(n.message)}}),Ze=F({mutationFn:()=>{if(!ie)throw new Error("No nudge type selected");return gs(t,ie,He||void 0,Ye||void 0)},onSuccess:n=>{n.success?(re(n.message||"Test nudge sent"),ye(!1),Ve(""),Qe(""),setTimeout(()=>re(""),5e3)):G(n.error||"Failed to send test nudge")},onError:n=>G(n.message)}),bn=d.useCallback(n=>{xn(n),G(""),ye(!0)},[]),[Re,jn]=d.useState(30),{data:E,isLoading:en,refetch:yn}=q({queryKey:["review-metrics",t,Re],queryFn:()=>ls(t,Re),enabled:!!t}),[fn,Fe]=d.useState(!1),[vn,ve]=d.useState(!1),[oe,nn]=d.useState(null),[Sn,wn]=d.useState(""),[_n,Cn]=d.useState(""),[Se,sn]=d.useState(""),[an,tn]=d.useState(""),[rn,Ie]=d.useState(""),[on,ne]=d.useState(""),[kn,dn]=d.useState(!1),Me=F({mutationFn:n=>rs(t,n),onSuccess:n=>{wn(n.html_body),Cn(n.subject),Fe(!0)}}),ln=F({mutationFn:()=>{if(!oe)throw new Error("No template selected");return os(t,oe.id,Se,an)},onSuccess:n=>{n.success?(Ie(`Test email sent to ${Se}`),ve(!1),sn(""),tn(""),setTimeout(()=>Ie(""),5e3)):ne(n.error||"Failed to send test email")},onError:n=>ne(n.message)}),Tn=d.useCallback(n=>{nn(n),Me.mutate(n.id)},[Me]),An=d.useCallback(n=>{nn(n),ne(""),ve(!0)},[]),En=d.useCallback(()=>{if(!l.name.trim()){B("Tier name is required");return}const n={name:l.name.trim(),monthly_price:parseFloat(l.monthly_price)||0,yearly_price:l.yearly_price?parseFloat(l.yearly_price):void 0,bonus_rate:(parseFloat(l.bonus_rate)||0)/100,purchase_cashback_pct:parseFloat(l.purchase_cashback_pct)||0,monthly_credit_amount:parseFloat(l.monthly_credit)||0,credit_expiration_days:l.credit_expiration_days?parseInt(l.credit_expiration_days):null,benefits:{discount_percent:parseFloat(l.discount_percent)||0,free_shipping:l.free_shipping,priority_support:l.priority_support,early_access:l.early_access,exclusive_events:l.exclusive_events,signup_bonus:parseFloat(l.signup_bonus)||0}};M?Ee.mutate({id:M.id,data:n}):Ae.mutate(n)},[l,M,Ae,Ee]),we=F({mutationFn:async()=>{for(const[n,m]of Object.entries(D))Object.keys(m).length>0&&await Zn(t,n,m)},onSuccess:()=>{p.invalidateQueries({queryKey:["settings"]}),k(!1),L({}),W(!0),setTimeout(()=>W(!1),3e3)}}),u=d.useCallback((n,m,g)=>{L($=>({...$,[n]:{...$[n]||{},[m]:g}})),k(!0)},[]),Pn=d.useCallback(()=>{we.mutate()},[we]),Rn=d.useCallback(()=>{L({}),k(!1)},[]);d.useEffect(()=>{S?Q.saveBar.show("settings-save-bar"):Q.saveBar.hide("settings-save-bar")},[S,Q.saveBar]);const o=d.useCallback((n,m,g)=>{const $=D[n]?.[m];return $!==void 0?$:J?.settings?.[n]?.[m]??g},[J,D]);return t?le?e.jsx($e,{title:"Settings",children:e.jsx(c,{padding:"1600",children:e.jsx(i,{align:"center",children:e.jsx(U,{size:"large"})})})}):e.jsxs($e,{title:"Settings",subtitle:"Configure your TradeUp loyalty program",children:[de&&e.jsx(c,{paddingBlockEnd:"400",children:e.jsx(C,{tone:"success",onDismiss:()=>W(!1),children:e.jsx("p",{children:"Settings saved successfully."})})}),e.jsxs(f,{children:[ae&&e.jsx(f.Section,{children:e.jsx(C,{tone:"critical",children:e.jsx("p",{children:"Failed to load settings. Please try refreshing the page."})})}),e.jsx(f.AnnotatedSection,{id:"branding",title:"Branding",description:"Customize your program's appearance",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(x,{label:"Program Name",value:o("branding","app_name","TradeUp"),onChange:n=>u("branding","app_name",n),helpText:"Shown to customers in their membership dashboard",autoComplete:"off"}),e.jsx(x,{label:"Tagline",value:o("branding","tagline",""),onChange:n=>u("branding","tagline",n),helpText:"A short description of your loyalty program",autoComplete:"off"}),e.jsx(N,{label:"Style",options:[{label:"Glass (Modern)",value:"glass"},{label:"Solid",value:"solid"},{label:"Minimal",value:"minimal"}],value:o("branding","style","glass"),onChange:n=>u("branding","style",n)})]})})}),e.jsx(f.AnnotatedSection,{id:"general",title:"General",description:"Basic program configuration",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(N,{label:"Currency",options:[{label:"USD ($)",value:"USD"},{label:"CAD (C$)",value:"CAD"},{label:"EUR (€)",value:"EUR"},{label:"GBP (£)",value:"GBP"},{label:"AUD (A$)",value:"AUD"}],value:o("general","currency","USD"),onChange:n=>u("general","currency",n)}),e.jsx(N,{label:"Timezone",options:[{label:"Pacific Time (US)",value:"America/Los_Angeles"},{label:"Mountain Time (US)",value:"America/Denver"},{label:"Central Time (US)",value:"America/Chicago"},{label:"Eastern Time (US)",value:"America/New_York"},{label:"UTC",value:"UTC"},{label:"London (GMT)",value:"Europe/London"}],value:o("general","timezone","America/Los_Angeles"),onChange:n=>u("general","timezone",n)})]})})}),e.jsx(f.AnnotatedSection,{id:"features",title:"Features",description:"Enable or disable program features",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Core Features"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsxs(a,{gap:"300",children:[e.jsx(y,{label:"Enable self-signup",checked:o("features","self_signup_enabled",!0),onChange:n=>u("features","self_signup_enabled",n),helpText:"Allow customers to sign up for membership themselves"}),e.jsx(y,{label:"Enable points system",checked:o("features","points_enabled",!1),onChange:n=>u("features","points_enabled",n),helpText:"Award points for purchases that can be redeemed for rewards"}),e.jsx(y,{label:"Enable referral program",checked:o("features","referrals_enabled",!1),onChange:n=>u("features","referrals_enabled",n),helpText:"Allow members to earn rewards by referring new customers"})]})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Advanced Options"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsx(a,{gap:"300",children:e.jsx(y,{label:"Show advanced features",checked:o("features","advanced_features_enabled",!1),onChange:n=>u("features","advanced_features_enabled",n),helpText:"Shows Promotions, Points & Rewards, and Membership Tiers in the navigation sidebar. Perfect for power users."})})})]})})}),!o("features","advanced_features_enabled",!1)&&e.jsx(f.AnnotatedSection,{id:"tiers-shortcut",title:"Membership Tiers",description:"Configure your membership tiers and benefits",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"p",variant:"bodyMd",children:"Set up tier pricing, trade-in bonuses, and member benefits for your loyalty program."}),e.jsx(j,{url:"/app/tiers",fullWidth:!0,children:"Manage Membership Tiers"})]})})}),e.jsx(f.AnnotatedSection,{id:"auto-enrollment",title:"Auto-Enrollment",description:"Automatically enroll customers on first purchase",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(c,{paddingInlineStart:"200",children:e.jsx(a,{gap:"300",children:e.jsx(y,{label:"Enable auto-enrollment",checked:o("auto_enrollment","enabled",!0),onChange:n=>u("auto_enrollment","enabled",n),helpText:"Automatically enroll customers when they make their first purchase"})})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Enrollment Conditions"}),e.jsx(x,{label:"Minimum Order Value",type:"number",value:String(o("auto_enrollment","min_order_value",0)),onChange:n=>u("auto_enrollment","min_order_value",parseFloat(n)||0),prefix:"$",helpText:"Only auto-enroll if order is at least this amount (0 = any order)",autoComplete:"off"})]})})}),e.jsx(f.AnnotatedSection,{id:"cashback",title:"Cashback & Rewards",description:"Configure how rewards are delivered",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Delivery Method"}),e.jsx(N,{label:"Reward Delivery Method",options:[{label:"Shopify Native Store Credit (Recommended)",value:"native_store_credit"},{label:"Unique Discount Codes",value:"discount_code"},{label:"Shopify Gift Cards",value:"gift_card"},{label:"Manual Fulfillment",value:"manual"}],value:o("cashback","method","native_store_credit"),onChange:n=>u("cashback","method",n),helpText:"How store credit and rewards are delivered to customers"}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Reward Types"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsxs(a,{gap:"300",children:[e.jsx(y,{label:"Enable purchase cashback",checked:o("cashback","purchase_cashback_enabled",!0),onChange:n=>u("cashback","purchase_cashback_enabled",n),helpText:"Award cashback percentage on purchases based on tier"}),e.jsx(y,{label:"Enable trade-in credit",checked:o("cashback","trade_in_credit_enabled",!0),onChange:n=>u("cashback","trade_in_credit_enabled",n),helpText:"Award bonus credit on trade-ins based on tier"}),e.jsx(y,{label:"Same-transaction bonus",checked:o("cashback","same_transaction_bonus",!0),onChange:n=>u("cashback","same_transaction_bonus",n),helpText:"Apply tier benefits to the order that includes membership purchase"})]})})]})})}),e.jsx(f.AnnotatedSection,{id:"trade-ins",title:"Trade-In Rules",description:"Configure automatic approval thresholds",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Trade-In Options"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsxs(a,{gap:"300",children:[e.jsx(y,{label:"Enable trade-ins",checked:o("trade_ins","enabled",!0),onChange:n=>u("trade_ins","enabled",n),helpText:"Allow customers to submit items for trade-in credit"}),e.jsx(y,{label:"Allow guest trade-ins",checked:o("trade_ins","allow_guest_trade_ins",!0),onChange:n=>u("trade_ins","allow_guest_trade_ins",n),helpText:"Allow non-members to submit trade-ins (no tier bonus)"}),e.jsx(y,{label:"Require photo uploads",checked:o("trade_ins","require_photos",!1),onChange:n=>u("trade_ins","require_photos",n),helpText:"Customers must upload photos when submitting trade-ins"})]})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Approval Thresholds"}),e.jsxs(i,{gap:"400",wrap:!1,children:[e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"Auto-Approve Under",type:"number",value:String(o("trade_ins","auto_approve_under",50)),onChange:n=>u("trade_ins","auto_approve_under",parseFloat(n)||0),prefix:"$",helpText:"Automatically approved",autoComplete:"off"})}),e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"Require Review Over",type:"number",value:String(o("trade_ins","require_review_over",500)),onChange:n=>u("trade_ins","require_review_over",parseFloat(n)||0),prefix:"$",helpText:"Requires manual review",autoComplete:"off"})})]})]})})}),e.jsx(f.AnnotatedSection,{id:"subscriptions",title:"Subscriptions",description:"Membership subscription options",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Billing Cycles"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsxs(a,{gap:"300",children:[e.jsx(y,{label:"Enable monthly subscriptions",checked:o("subscriptions","monthly_enabled",!0),onChange:n=>u("subscriptions","monthly_enabled",n),helpText:"Allow members to pay month-to-month"}),e.jsx(y,{label:"Enable yearly subscriptions",checked:o("subscriptions","yearly_enabled",!0),onChange:n=>u("subscriptions","yearly_enabled",n),helpText:"Offer annual billing with potential discount"})]})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Trial & Grace Period"}),e.jsxs(i,{gap:"400",wrap:!1,children:[e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"Free Trial Days",type:"number",value:String(o("subscriptions","trial_days",0)),onChange:n=>u("subscriptions","trial_days",parseInt(n)||0),suffix:"days",helpText:"0 = no trial",autoComplete:"off"})}),e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"Grace Period",type:"number",value:String(o("subscriptions","grace_period_days",3)),onChange:n=>u("subscriptions","grace_period_days",parseInt(n)||0),suffix:"days",helpText:"Retry failed payments",autoComplete:"off"})})]})]})})}),e.jsx(f.AnnotatedSection,{id:"anniversary-rewards",title:"Anniversary Rewards",description:"Automatically reward members on their membership anniversary",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(c,{paddingInlineStart:"200",children:e.jsx(a,{gap:"300",children:e.jsx(y,{label:"Enable anniversary rewards",checked:o("anniversary","enabled",!1),onChange:n=>u("anniversary","enabled",n),helpText:"Automatically send rewards to members on their membership anniversary"})})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Reward Configuration"}),e.jsx(N,{label:"Reward Type",options:[{label:"Points",value:"points"},{label:"Store Credit",value:"credit"},{label:"Discount Code",value:"discount_code"}],value:o("anniversary","reward_type","points"),onChange:n=>u("anniversary","reward_type",n),helpText:"Choose how to reward members on their anniversary",disabled:!o("anniversary","enabled",!1)}),e.jsx(x,{label:"Reward Amount",type:"number",value:String(o("anniversary","reward_amount",100)),onChange:n=>u("anniversary","reward_amount",parseFloat(n)||0),prefix:o("anniversary","reward_type","points")==="points"?"":"$",suffix:o("anniversary","reward_type","points")==="points"?"points":"",helpText:o("anniversary","reward_type","points")==="points"?"Number of bonus points to award":o("anniversary","reward_type","points")==="credit"?"Dollar amount of store credit to award":"Discount percentage for the code",autoComplete:"off",disabled:!o("anniversary","enabled",!1)}),e.jsx(N,{label:"Send Email",options:[{label:"On anniversary day",value:"0"},{label:"1 day before",value:"1"},{label:"3 days before",value:"3"},{label:"7 days before",value:"7"}],value:String(o("anniversary","email_days_before",0)),onChange:n=>u("anniversary","email_days_before",parseInt(n)),helpText:"When to send the anniversary reward email",disabled:!o("anniversary","enabled",!1)}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Tiered Rewards"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsx(y,{label:"Enable tiered anniversary rewards",checked:o("anniversary","tiered_rewards_enabled",!1),onChange:n=>u("anniversary","tiered_rewards_enabled",n),helpText:"Give different reward amounts based on anniversary year (e.g., Year 1 = $5, Year 2 = $10, Year 5 = $25)",disabled:!o("anniversary","enabled",!1)})}),o("anniversary","tiered_rewards_enabled",!1)&&o("anniversary","enabled",!1)&&e.jsxs(a,{gap:"300",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"Tiered Reward Amounts"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Set custom reward amounts for specific anniversary years. Years not configured will use the default amount above."}),e.jsx(a,{gap:"200",children:[1,2,3,5,10].map(n=>{const m=o("anniversary","tiered_rewards",{}),g=m[String(n)]??"",$=o("anniversary","reward_type","points");return e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(c,{minWidth:"100px",children:e.jsxs(s,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:["Year ",n,":"]})}),e.jsx(c,{width:"150px",children:e.jsx(x,{label:`Year ${n} reward`,labelHidden:!0,type:"number",value:String(g),onChange:Y=>{const O={...m};Y===""||Y==="0"?delete O[String(n)]:O[String(n)]=parseFloat(Y)||0,u("anniversary","tiered_rewards",O)},prefix:$==="points"?"":"$",suffix:$==="points"?"pts":"",placeholder:`${o("anniversary","reward_amount",100)}`,autoComplete:"off"})}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:g?"":"(uses default)"})]},n)})}),e.jsx(C,{tone:"info",children:e.jsx("p",{children:(()=>{const n=o("anniversary","tiered_rewards",{}),m=o("anniversary","reward_type","points"),g=o("anniversary","reward_amount",100),$=O=>m==="points"?`${O} points`:`$${O}`,Y=[];for(const O of[1,2,5]){const Fn=n[String(O)]??g;Y.push(`Year ${O}: ${$(Fn)}`)}return`Example: ${Y.join(", ")}`})()})})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"How Anniversary Rewards Work"}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["When enabled, members will automatically receive their reward on the anniversary of their membership enrollment. The reward is delivered based on the reward type you select above. A celebratory email is sent according to your timing preference.",o("anniversary","tiered_rewards_enabled",!1)&&" With tiered rewards enabled, members receive different amounts based on their anniversary year."]})]})]})})}),o("features","advanced_features_enabled",!1)&&e.jsx(f.AnnotatedSection,{id:"tiers",title:"Membership Tiers",description:"Configure tier benefits and pricing",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Your Tiers"}),e.jsx(j,{onClick:()=>be(),icon:cn,children:"Add Tier"})]}),xe&&!he&&e.jsx(C,{tone:"critical",onDismiss:()=>B(""),children:e.jsx("p",{children:xe})}),Te?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"Loading tiers..."})]}):K?.tiers&&K.tiers.length>0?e.jsx(Ln,{resourceName:{singular:"tier",plural:"tiers"},items:K.tiers.filter(n=>n&&n.id!=null),renderItem:n=>e.jsx(On,{id:String(n.id),onClick:()=>be(n),shortcutActions:[{content:"Edit",onAction:()=>be(n)},{content:"Delete",onAction:()=>ge(n)}],children:e.jsx(i,{align:"space-between",blockAlign:"center",children:e.jsxs(a,{gap:"100",children:[e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:n.name}),n.is_active?e.jsx(T,{tone:"success",children:"Active"}):e.jsx(T,{children:"Inactive"})]}),e.jsxs(i,{gap:"300",children:[e.jsxs(s,{as:"span",variant:"bodySm",tone:"subdued",children:["$",n.monthly_price,"/mo",n.yearly_price?` · $${n.yearly_price}/yr`:""]}),e.jsxs(s,{as:"span",variant:"bodySm",tone:"subdued",children:["+",((n.bonus_rate||0)*100).toFixed(1).replace(/\.0$/,""),"% trade-in bonus"]}),n.purchase_cashback_pct?e.jsxs(s,{as:"span",variant:"bodySm",tone:"subdued",children:[n.purchase_cashback_pct,"% cashback"]}):null,n.monthly_credit_amount?e.jsxs(s,{as:"span",variant:"bodySm",tone:"subdued",children:["$",n.monthly_credit_amount,"/mo credit"]}):null,n.benefits?.free_shipping&&e.jsx(T,{tone:"success",children:"Free Shipping"}),n.benefits?.early_access&&e.jsx(T,{children:"Early Access"})]})]})})})}):e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(a,{gap:"200",inlineAlign:"center",children:[e.jsx(s,{as:"p",tone:"subdued",children:"No tiers configured yet."}),e.jsx(j,{onClick:()=>be(),icon:cn,children:"Create Your First Tier"})]})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Tier Benefits Explained"}),e.jsxs(h,{type:"bullet",children:[e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Trade-In Bonus:"})," Extra percentage added to trade-in value (e.g., +5% on $100 = $5 bonus)"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Purchase Cashback:"})," Percentage of order total credited back after purchase"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Monthly Credit:"})," Fixed store credit awarded on the 1st of each month"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Credit Expiration:"})," How long before issued credits expire (optional)"]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"notifications",title:"Notifications",description:"Email notification settings",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[rn&&e.jsx(C,{tone:"success",onDismiss:()=>Ie(""),children:e.jsx("p",{children:rn})}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Email Notifications"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsx(y,{label:"Enable email notifications",checked:o("notifications","enabled",!0),onChange:n=>u("notifications","enabled",n),helpText:"Send automatic emails for program events"})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Notification Types"}),e.jsx(c,{paddingInlineStart:"200",children:e.jsxs(a,{gap:"300",children:[e.jsx(y,{label:"Welcome email on enrollment",checked:o("notifications","welcome_email",!0),onChange:n=>u("notifications","welcome_email",n),helpText:"Sent when a new member joins"}),e.jsx(y,{label:"Trade-in status updates",checked:o("notifications","trade_in_updates",!0),onChange:n=>u("notifications","trade_in_updates",n),helpText:"Notify members when trade-ins are approved or completed"}),e.jsx(y,{label:"Tier upgrade/downgrade",checked:o("notifications","tier_change",!0),onChange:n=>u("notifications","tier_change",n),helpText:"Inform members when their tier status changes"}),e.jsx(y,{label:"Store credit issued",checked:o("notifications","credit_issued",!0),onChange:n=>u("notifications","credit_issued",n),helpText:"Notify members when credit is added to their account"})]})}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Sender Configuration"}),e.jsxs(i,{gap:"400",wrap:!1,children:[e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"From Name",value:o("notifications","from_name","")||"",onChange:n=>u("notifications","from_name",n),placeholder:"Your Store Name",helpText:"Defaults to shop name",autoComplete:"off"})}),e.jsx(c,{minWidth:"200px",width:"50%",children:e.jsx(x,{label:"From Email",type:"email",value:o("notifications","from_email","")||"",onChange:n=>u("notifications","from_email",n),placeholder:"noreply@yourstore.com",helpText:"Must be verified with SendGrid",autoComplete:"email"})})]})]})})}),e.jsx(f.AnnotatedSection,{id:"nudges",title:"Nudges & Reminders",description:"Automated messages to engage members and drive activity",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[Je&&e.jsx(C,{tone:"success",onDismiss:()=>re(""),children:e.jsx("p",{children:Je})}),fe&&e.jsx(C,{tone:"critical",onDismiss:()=>G(""),children:e.jsx("p",{children:fe})}),e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Engagement Nudges"}),e.jsx(j,{onClick:()=>Ke(),loading:Ge,icon:se,size:"slim",children:"Refresh"})]}),Ge?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"Loading nudge settings..."})]}):Pe?.configs&&Pe.configs.length>0?e.jsx(a,{gap:"400",children:Pe.configs.map(n=>{const m=un[n.nudge_type]||{label:n.nudge_type.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase()),description:"Configure this nudge type"};return e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(a,{gap:"300",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:m.label}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:m.description})]}),e.jsxs(i,{gap:"200",children:[e.jsx(y,{label:"",labelHidden:!0,checked:n.is_enabled,onChange:g=>{Xe.mutate({nudgeType:n.nudge_type,data:{is_enabled:g}})}}),e.jsx(T,{tone:n.is_enabled?"success":void 0,children:n.is_enabled?"Enabled":"Disabled"})]})]}),n.is_enabled&&e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(i,{gap:"400",wrap:!0,children:e.jsx(c,{minWidth:"200px",children:e.jsx(x,{label:"Frequency",type:"number",value:String(n.frequency_days),onChange:g=>{Xe.mutate({nudgeType:n.nudge_type,data:{frequency_days:parseInt(g)||7}})},suffix:"days",autoComplete:"off",helpText:"Time between nudges"})})}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h5",variant:"bodySm",fontWeight:"semibold",children:"Message Preview"}),e.jsx(c,{padding:"300",background:"bg-surface",borderRadius:"100",borderWidth:"025",borderColor:"border",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:n.message_template||"No message template configured"})})]}),e.jsx(i,{gap:"200",children:e.jsx(j,{icon:qn,onClick:()=>bn(n.nudge_type),size:"slim",children:"Send Test"})})]})]})},n.id||n.nudge_type)})}):e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(a,{gap:"200",inlineAlign:"center",children:[e.jsx(s,{as:"p",tone:"subdued",children:"No nudge configurations found."}),e.jsx(j,{onClick:()=>Ke(),children:"Load Default Configurations"})]})}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"How Nudges Work"}),e.jsxs(h,{type:"bullet",children:[e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Points Expiring:"})," Reminds members before their points expire"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Tier Progress:"})," Encourages members who are close to the next tier"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Inactive Re-engagement:"})," Reaches out to members who have not visited recently"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Trade-In Reminder:"})," Prompts members to bring in items for trade-in"]})]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"email-templates",title:"Email Templates",description:"Preview and test your email notifications",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"TradeUp sends automatic emails for key events. Preview each template below and send test emails to verify your setup."}),mn?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"Loading templates..."})]}):ze?.by_category?e.jsx(a,{gap:"500",children:Object.entries(ze.by_category||{}).filter(([n])=>n).map(([n,m])=>e.jsxs(a,{gap:"200",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:[String(n||"General").replace("_"," ").split(" ").filter(g=>g).map(g=>String(g).charAt(0).toUpperCase()+String(g).slice(1)).join(" ")," Emails"]}),e.jsx(a,{gap:"100",children:m.filter(g=>g&&g.id).map(g=>e.jsx(c,{padding:"300",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:g.name}),e.jsxs(s,{as:"span",variant:"bodySm",tone:"subdued",children:["Subject: ",(g.subject||"").substring(0,50),"..."]})]}),e.jsxs(i,{gap:"200",children:[e.jsx(j,{icon:Un,variant:"plain",onClick:()=>Tn(g),loading:Me.isPending&&oe?.id===g.id,children:"Preview"}),e.jsx(j,{icon:Wn,variant:"plain",onClick:()=>An(g),children:"Send Test"})]})]})},g.id))})]},n||"unknown"))}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"No email templates available."}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Email Setup Requirements"}),e.jsxs(h,{type:"bullet",children:[e.jsxs(h.Item,{children:[e.jsx("strong",{children:"SendGrid API Key:"})," Configure in your environment variables"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"Sender Verification:"})," Verify your sending domain with SendGrid"]}),e.jsxs(h.Item,{children:[e.jsx("strong",{children:"From Email:"})," Set above to match your verified domain"]})]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"contact",title:"Support Contact",description:"Contact information shown to customers",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(x,{label:"Support Email",type:"email",value:o("contact","support_email","")||"",onChange:n=>u("contact","support_email",n),placeholder:"support@yourstore.com",autoComplete:"email"}),e.jsx(x,{label:"Support Phone",type:"tel",value:o("contact","support_phone","")||"",onChange:n=>u("contact","support_phone",n),placeholder:"+1 (555) 123-4567",autoComplete:"tel"})]})})}),e.jsx(f.AnnotatedSection,{id:"segments",title:"Shopify Customer Segments",description:"Auto-create segments for tier-based marketing with Shopify Email",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"TradeUp can automatically create customer segments in Shopify based on your membership tiers. Use these segments with Shopify Email to send targeted campaigns to specific member groups."}),e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Sync Tier Segments"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:'Creates "TradeUp Members" (all) + one segment per tier'})]}),e.jsx(j,{onClick:()=>P.mutate(),loading:P.isPending,icon:se,children:"Sync Segments"})]}),P.isSuccess&&P.data&&e.jsx(C,{tone:"success",onDismiss:()=>P.reset(),children:e.jsxs(a,{gap:"200",children:[e.jsxs(s,{as:"p",variant:"bodySm",children:[P.data.segments.length," segments synced successfully!"]}),e.jsx(h,{type:"bullet",children:P.data.segments.filter(n=>n&&n.id!=null).map(n=>e.jsxs(h.Item,{children:[n.name||"Unknown"," (",n.action||"unknown",")"]},n.id))})]})}),P.isError&&e.jsx(C,{tone:"critical",children:e.jsx("p",{children:"Failed to sync segments. Please try again."})}),e.jsx(b,{}),e.jsxs(a,{gap:"300",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Current TradeUp Segments"}),Ce?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"Loading segments..."})]}):X?.tradeup_segments&&X.tradeup_segments.length>0?e.jsx(a,{gap:"200",children:X.tradeup_segments.map(n=>e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(i,{gap:"200",children:[e.jsx(T,{tone:"success",children:"Active"}),e.jsx(s,{as:"span",variant:"bodySm",fontWeight:"semibold",children:n.name})]}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:n.query})]},n.id))}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:'No TradeUp segments found. Click "Sync Segments" to create them.'}),e.jsxs(i,{gap:"200",children:[e.jsx(j,{variant:"plain",onClick:()=>ce(),children:"Refresh"}),e.jsx(j,{variant:"plain",url:"https://admin.shopify.com/store/segments",external:!0,children:"View in Shopify →"})]})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"How to Use with Shopify Email"}),e.jsxs(h,{type:"number",children:[e.jsx(h.Item,{children:"Go to Marketing → Campaigns in Shopify Admin"}),e.jsx(h.Item,{children:"Create a new email campaign"}),e.jsx(h.Item,{children:'Under "Recipients", select your TradeUp segment (e.g., "TradeUp Gold Members")'}),e.jsx(h.Item,{children:"Design and send your campaign - only those members will receive it!"})]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"products",title:"Membership Products",description:"Sync tiers as purchasable products in your Shopify store",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Create Shopify products for each membership tier. Customers can purchase these products to join a tier directly through your Shopify checkout."}),e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Product Setup Wizard"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Guided setup with templates, previews, and customization options"})]}),e.jsx(j,{variant:"primary",onClick:()=>r("/app/products/wizard"),children:"Launch Wizard"})]})}),e.jsx(b,{}),e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Quick Sync (Advanced)"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Automatically creates products with default settings for each tier"})]}),e.jsx(j,{onClick:()=>R.mutate(),loading:R.isPending,icon:se,children:"Sync Products"})]}),R.isSuccess&&R.data&&e.jsx(C,{tone:"success",onDismiss:()=>R.reset(),children:e.jsxs(a,{gap:"200",children:[e.jsxs(s,{as:"p",variant:"bodySm",children:[R.data.products.length," membership products synced!"]}),e.jsx(h,{type:"bullet",children:R.data.products.filter(n=>n&&n.product_id!=null).map(n=>e.jsxs(h.Item,{children:[n.tier||"Unknown"," Membership (",n.action||"unknown",")"]},n.product_id))})]})}),R.isError&&e.jsx(C,{tone:"critical",children:e.jsx("p",{children:"Failed to sync products. Please try again."})}),e.jsx(b,{}),e.jsxs(a,{gap:"300",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Current Membership Products"}),ke?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"Loading products..."})]}):Z?.products&&Z.products.length>0?e.jsx(a,{gap:"300",children:Z.products.filter(n=>n&&n.id).map(n=>e.jsxs(a,{gap:"100",children:[e.jsx(i,{align:"space-between",blockAlign:"center",children:e.jsxs(i,{gap:"200",children:[e.jsx(T,{tone:n.status==="ACTIVE"?"success":"attention",children:String(n.status||"DRAFT")}),e.jsx(s,{as:"span",variant:"bodySm",fontWeight:"semibold",children:n.title||"Untitled"})]})}),e.jsx(i,{gap:"200",children:(n.variants||[]).filter(m=>m&&m.id).map(m=>e.jsx(T,{tone:"info",children:`${m.title||"Variant"}: $${m.price||"0"}`},m.id))})]},n.id))}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:'No membership products found. Click "Sync Products" to create them.'}),e.jsxs(i,{gap:"200",children:[e.jsx(j,{variant:"plain",onClick:()=>ue(),children:"Refresh"}),e.jsx(j,{variant:"plain",url:"https://admin.shopify.com/products",external:!0,children:"View in Shopify →"})]})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"How Membership Purchases Work"}),e.jsxs(h,{type:"number",children:[e.jsx(h.Item,{children:"Customer purchases a membership product in your store"}),e.jsx(h.Item,{children:"TradeUp receives the order webhook and automatically enrolls the customer"}),e.jsx(h.Item,{children:"Customer is tagged with their tier (e.g., tu-gold) and gains benefits"}),e.jsx(h.Item,{children:"For subscriptions, tier continues until subscription is cancelled"})]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"integrations",title:"Partner Integrations",description:"Connect external systems and POS for data sync",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Connect TradeUp with external systems to sync member data, trade-ins, and store credit across platforms."}),e.jsxs(a,{gap:"300",children:[e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(i,{gap:"300",children:[e.jsx(c,{padding:"200",background:"bg-surface",borderRadius:"100",children:e.jsx(s,{as:"span",variant:"headingMd",children:"POS"})}),e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"Point of Sale Integration"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Sync members and credit with Shopify POS"})]})]}),e.jsx(T,{tone:"success",children:"Connected"})]})}),e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(i,{gap:"300",children:[e.jsx(c,{padding:"200",background:"bg-surface",borderRadius:"100",children:e.jsx(s,{as:"span",variant:"headingMd",children:"API"})}),e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"API Access"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Use the TradeUp API for custom integrations"})]})]}),e.jsx(j,{variant:"secondary",children:"Get API Key"})]})}),e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(i,{gap:"300",children:[e.jsx(c,{padding:"200",background:"bg-surface",borderRadius:"100",children:e.jsx(s,{as:"span",variant:"headingMd",children:"ERP"})}),e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"ERP/Accounting System"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Export transaction data for accounting"})]})]}),e.jsx(T,{children:"Coming Soon"})]})}),e.jsx(c,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(i,{gap:"300",children:[e.jsx(c,{padding:"200",background:"bg-surface",borderRadius:"100",children:e.jsx(s,{as:"span",variant:"headingMd",children:"CRM"})}),e.jsxs(a,{gap:"050",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"CRM Integration"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Sync member data with your CRM"})]})]}),e.jsx(T,{children:"Coming Soon"})]})})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Webhook Endpoints"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Receive real-time notifications when events occur in TradeUp."}),e.jsxs(h,{type:"bullet",children:[e.jsx(h.Item,{children:"member.created - New member enrolled"}),e.jsx(h.Item,{children:"member.tier_changed - Member tier upgraded/downgraded"}),e.jsx(h.Item,{children:"trade_in.submitted - New trade-in received"}),e.jsx(h.Item,{children:"trade_in.approved - Trade-in approved, credit issued"}),e.jsx(h.Item,{children:"credit.issued - Store credit added to member"})]}),e.jsx(j,{variant:"plain",url:"https://docs.tradeup.io/webhooks",external:!0,children:"View Webhook Documentation →"})]})]})})}),e.jsx(f.AnnotatedSection,{id:"scheduled-tasks",title:"Monthly Credits & Automation",description:"Manage automated credit distribution and expiration",children:e.jsxs(a,{gap:"400",children:[Le&&e.jsx(C,{tone:"success",onDismiss:()=>V(""),children:e.jsx("p",{children:Le})}),Oe&&e.jsx(C,{tone:"critical",onDismiss:()=>te(""),children:e.jsx("p",{children:Oe})}),e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(_e,{source:Bn,tone:"base"}),e.jsx(s,{as:"h3",variant:"headingMd",children:"Monthly Credit Distribution"})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Automatically issues store credit to members based on their tier benefits on the 1st of each month."})]}),e.jsx(i,{gap:"200",children:e.jsx(j,{onClick:()=>hn(),loading:qe,icon:se,children:"Refresh"})})]}),e.jsx(b,{}),qe?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",children:"Loading preview..."})]}):z?e.jsxs(a,{gap:"300",children:[e.jsxs(i,{gap:"400",wrap:!0,children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Eligible Members"}),e.jsx(s,{as:"p",variant:"headingLg",children:z.credited})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Total Amount"}),e.jsxs(s,{as:"p",variant:"headingLg",children:["$",(z.total_amount||0).toFixed(2)]})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Already Received"}),e.jsx(s,{as:"p",variant:"headingLg",children:z.skipped})]})]}),z.credited>0&&e.jsx(c,{paddingBlockStart:"200",children:e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"Preview (first 5 members):"}),z.details.slice(0,5).filter(n=>n&&n.member_number).map((n,m)=>e.jsxs(i,{gap:"200",align:"space-between",children:[e.jsxs(s,{as:"span",variant:"bodySm",children:[n.member_number||"Unknown"," (",n.tier||"No tier",")"]}),e.jsx(T,{tone:"success",children:`$${(n.amount||0).toFixed(2)}`})]},m))]})}),e.jsx(c,{paddingBlockStart:"200",children:e.jsxs(i,{gap:"200",children:[e.jsx(j,{variant:"primary",onClick:()=>We.mutate(),loading:We.isPending,disabled:z.credited===0,children:"Distribute Credits Now"}),z.credited===0&&e.jsx(s,{as:"span",variant:"bodySm",tone:"subdued",children:"All eligible members have already received credits this month"})]})})]}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"No members with tier monthly credits configured"})]})}),e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(_e,{source:zn,tone:"base"}),e.jsx(s,{as:"h3",variant:"headingMd",children:"Credit Expiration"})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Credits with expiration dates are automatically expired. View upcoming expirations and process expired credits."})]}),e.jsx(i,{gap:"200",children:e.jsx(j,{onClick:()=>pn(),loading:Ue,icon:se,children:"Refresh"})})]}),e.jsx(b,{}),Ue?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",children:"Loading..."})]}):ee?e.jsxs(a,{gap:"300",children:[e.jsxs(i,{gap:"400",wrap:!0,children:[e.jsxs(a,{gap:"100",children:[e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["Expiring in ",ee.days_ahead," days"]}),e.jsxs(s,{as:"p",variant:"headingLg",children:[ee.members_with_expiring_credits," members"]})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Total Amount Expiring"}),e.jsxs(s,{as:"p",variant:"headingLg",children:["$",(ee.total_amount_expiring||0).toFixed(2)]})]})]}),ee.members.length>0&&e.jsx(c,{paddingBlockStart:"200",children:e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"Members with expiring credits:"}),ee.members.slice(0,5).filter(n=>n&&n.member_number).map((n,m)=>e.jsxs(i,{gap:"200",align:"space-between",children:[e.jsxs(s,{as:"span",variant:"bodySm",children:[n.member_number||"Unknown"," (",n.email||"No email",")"]}),e.jsx(T,{tone:"warning",children:`$${(n.total_expiring||0).toFixed(2)}`})]},m))]})}),e.jsx(c,{paddingBlockStart:"200",children:e.jsx(j,{onClick:()=>Be.mutate(),loading:Be.isPending,children:"Process Expired Credits"})})]}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"No credits with expiration dates"})]})}),e.jsx(v,{children:e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Automation Schedule"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"These tasks run automatically on a schedule:"}),e.jsxs(h,{children:[e.jsxs(h.Item,{children:[e.jsx(s,{as:"span",fontWeight:"semibold",children:"Monthly credits:"})," 1st of each month at 6:00 AM UTC"]}),e.jsxs(h.Item,{children:[e.jsx(s,{as:"span",fontWeight:"semibold",children:"Credit expiration:"})," Daily at midnight UTC"]}),e.jsxs(h.Item,{children:[e.jsx(s,{as:"span",fontWeight:"semibold",children:"Expiration warnings:"})," Daily at 9:00 AM UTC (7-day warning)"]})]})]})})]})}),e.jsx(f.AnnotatedSection,{id:"review-metrics",title:"Review Prompt Metrics",description:"Track how many prompts convert to actual reviews",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(_e,{source:Gn,tone:"base"}),e.jsx(s,{as:"h3",variant:"headingMd",children:"Review Collection Performance"})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Metrics for in-app review prompts shown to merchants."})]}),e.jsxs(i,{gap:"200",children:[e.jsx(N,{label:"",labelHidden:!0,options:[{label:"Last 7 days",value:"7"},{label:"Last 30 days",value:"30"},{label:"Last 90 days",value:"90"},{label:"All time",value:"0"}],value:String(Re),onChange:n=>jn(parseInt(n))}),e.jsx(j,{onClick:()=>yn(),loading:en,icon:se,children:"Refresh"})]})]}),e.jsx(b,{}),en?e.jsxs(i,{align:"center",children:[e.jsx(U,{size:"small"}),e.jsx(s,{as:"span",variant:"bodySm",children:"Loading metrics..."})]}):E?.metrics?e.jsxs(a,{gap:"400",children:[e.jsxs(i,{gap:"400",wrap:!0,children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Prompt Impressions"}),e.jsx(s,{as:"p",variant:"headingLg",children:E.metrics.total_impressions})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Rate Now Clicks"}),e.jsxs(i,{gap:"100",blockAlign:"center",children:[e.jsx(s,{as:"p",variant:"headingLg",children:E.metrics.clicked_count}),e.jsx(T,{tone:"success",children:`${E.metrics.click_rate}%`})]})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Dismissed"}),e.jsxs(i,{gap:"100",blockAlign:"center",children:[e.jsx(s,{as:"p",variant:"headingLg",children:E.metrics.dismissed_count}),e.jsx(T,{children:`${E.metrics.dismiss_rate}%`})]})]}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Remind Later"}),e.jsxs(i,{gap:"100",blockAlign:"center",children:[e.jsx(s,{as:"p",variant:"headingLg",children:E.metrics.reminded_later_count}),e.jsx(T,{tone:"info",children:`${E.metrics.remind_later_rate}%`})]})]})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"Conversion Funnel"}),e.jsxs(i,{gap:"400",wrap:!0,children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Impressions"}),e.jsx(s,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:E.metrics.funnel.impressions})]}),e.jsx(s,{as:"span",variant:"bodyMd",tone:"subdued",children:"→"}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Engaged"}),e.jsxs(s,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:[E.metrics.funnel.engaged," (",E.metrics.funnel.engagement_rate,"%)"]})]}),e.jsx(s,{as:"span",variant:"bodyMd",tone:"subdued",children:"→"}),e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Converted (Clicked)"}),e.jsxs(s,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:[E.metrics.funnel.converted," (",E.metrics.funnel.conversion_rate,"%)"]})]})]})]}),e.jsx(c,{padding:"300",background:"bg-surface-secondary",borderRadius:"200",children:e.jsx(s,{as:"p",variant:"bodySm",children:E.metrics.summary})}),e.jsx(i,{align:"end",children:e.jsx(j,{url:"/app/review-dashboard",variant:"plain",children:"View Full Review Dashboard"})})]}):e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"No review prompt data available yet. Prompts will be tracked once merchants start seeing them."})]})})}),e.jsx(f.AnnotatedSection,{id:"support",title:"Support & Feedback",description:"Get help or submit feedback about TradeUp",children:e.jsx(v,{children:e.jsxs(a,{gap:"400",children:[e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsxs(i,{gap:"200",blockAlign:"center",children:[e.jsx(_e,{source:Kn,tone:"base"}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Report an Issue or Request a Feature"})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Let us know if you encounter any issues or have ideas for improvements."})]}),e.jsx(j,{onClick:()=>dn(!0),children:"Submit Feedback"})]}),e.jsx(b,{}),e.jsxs(a,{gap:"200",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Contact Support"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Need help? Reach out to our support team."}),e.jsxs(i,{gap:"200",children:[e.jsx(j,{variant:"plain",url:"mailto:mike@orbsportscards.com",external:!0,children:"Email Support"}),e.jsx(j,{variant:"plain",url:"https://docs.tradeup.io",external:!0,children:"Documentation"})]})]})]})})}),e.jsx(f.AnnotatedSection,{id:"danger",title:"Danger Zone",description:"Irreversible actions",children:e.jsx(v,{children:e.jsx(a,{gap:"400",children:e.jsxs(i,{align:"space-between",blockAlign:"center",children:[e.jsxs(a,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingSm",children:"Reset Program Data"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"This will delete all members and trade-in history. This action cannot be undone."})]}),e.jsx(j,{variant:"primary",tone:"critical",disabled:!0,children:"Reset Data"})]})})})})]}),e.jsx(I,{open:he,onClose:je,title:M?`Edit ${M.name} Tier`:"Create New Tier",primaryAction:{content:M?"Save Changes":"Create Tier",onAction:En,loading:Ae.isPending||Ee.isPending},secondaryActions:[{content:"Cancel",onAction:je}],children:e.jsxs(I.Section,{children:[xe&&e.jsx(c,{paddingBlockEnd:"400",children:e.jsx(C,{tone:"critical",onDismiss:()=>B(""),children:e.jsx("p",{children:xe})})}),e.jsxs(Ne,{children:[e.jsx(x,{label:"Tier Name",value:l.name,onChange:n=>A({...l,name:n}),placeholder:"Gold, Platinum, VIP, etc.",autoComplete:"off",requiredIndicator:!0}),e.jsxs(Ne.Group,{children:[e.jsx(x,{label:"Monthly Price",type:"number",value:l.monthly_price,onChange:n=>A({...l,monthly_price:n}),prefix:"$",suffix:"/mo",autoComplete:"off",helpText:"Set to 0 for free tier"}),e.jsx(x,{label:"Yearly Price",type:"number",value:l.yearly_price,onChange:n=>A({...l,yearly_price:n}),prefix:"$",suffix:"/yr",autoComplete:"off",helpText:"Optional discount for annual"})]}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Tier Benefits"}),e.jsx(x,{label:"Trade-In Bonus",type:"number",value:l.bonus_rate,onChange:n=>A({...l,bonus_rate:n}),suffix:"%",autoComplete:"off",helpText:"Extra percentage added to trade-in value. E.g., 5% bonus on $100 trade = $5 extra credit."}),e.jsx(x,{label:"Purchase Cashback",type:"number",value:l.purchase_cashback_pct,onChange:n=>A({...l,purchase_cashback_pct:n}),suffix:"%",autoComplete:"off",helpText:"Percentage of purchase total credited back"}),e.jsx(x,{label:"Monthly Credit",type:"number",value:l.monthly_credit,onChange:n=>A({...l,monthly_credit:n}),prefix:"$",suffix:"/month",autoComplete:"off",helpText:"Fixed store credit awarded on 1st of each month"}),e.jsx(N,{label:"Credit Expiration",options:ts,value:l.credit_expiration_days,onChange:n=>A({...l,credit_expiration_days:n}),helpText:"How long before awarded credits expire"}),e.jsx(x,{label:"Store Discount",type:"number",value:l.discount_percent,onChange:n=>A({...l,discount_percent:n}),suffix:"%",autoComplete:"off",helpText:"Discount applied to all purchases (optional)"}),e.jsx(x,{label:"Signup Bonus",type:"number",value:l.signup_bonus,onChange:n=>A({...l,signup_bonus:n}),prefix:"$",autoComplete:"off",helpText:"One-time store credit bonus when member joins this tier"}),e.jsx(b,{}),e.jsx(s,{as:"h3",variant:"headingSm",children:"Feature Benefits"}),e.jsx(y,{label:"Free Shipping",checked:l.free_shipping,onChange:n=>A({...l,free_shipping:n}),helpText:"Members get free shipping on all orders"}),e.jsx(y,{label:"Early Access",checked:l.early_access,onChange:n=>A({...l,early_access:n}),helpText:"Early access to new product releases"}),e.jsx(y,{label:"Exclusive Events",checked:l.exclusive_events,onChange:n=>A({...l,exclusive_events:n}),helpText:"Access to member-only events and sales"}),e.jsx(y,{label:"Priority Support",checked:l.priority_support,onChange:n=>A({...l,priority_support:n}),helpText:"Priority customer support queue"})]})]})}),e.jsx(I,{open:fn,onClose:()=>Fe(!1),title:`Preview: ${oe?.name||"Email Template"}`,size:"large",secondaryActions:[{content:"Close",onAction:()=>Fe(!1)}],children:e.jsx(I.Section,{children:e.jsxs(a,{gap:"400",children:[e.jsx(c,{padding:"300",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{gap:"200",children:[e.jsx(s,{as:"span",variant:"bodySm",fontWeight:"semibold",children:"Subject:"}),e.jsx(s,{as:"span",variant:"bodySm",children:_n})]})}),e.jsx(c,{padding:"400",background:"bg-surface",borderRadius:"200",borderWidth:"025",borderColor:"border",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Sn},style:{fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"}})}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"This is a preview with sample data. Actual emails will include real member information."})]})})}),e.jsx(I,{open:vn,onClose:()=>{ve(!1),ne("")},title:`Send Test: ${oe?.name||"Email"}`,primaryAction:{content:"Send Test Email",onAction:()=>ln.mutate(),loading:ln.isPending,disabled:!Se},secondaryActions:[{content:"Cancel",onAction:()=>{ve(!1),ne("")}}],children:e.jsx(I.Section,{children:e.jsxs(a,{gap:"400",children:[on&&e.jsx(C,{tone:"critical",onDismiss:()=>ne(""),children:e.jsx("p",{children:on})}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Send a test email to verify your email configuration is working correctly."}),e.jsx(x,{label:"Recipient Email",type:"email",value:Se,onChange:sn,placeholder:"you@example.com",autoComplete:"email",requiredIndicator:!0}),e.jsx(x,{label:"Recipient Name",value:an,onChange:tn,placeholder:"John Doe",autoComplete:"name",helpText:"Name used in the email greeting"})]})})}),e.jsx(I,{open:me!==null,onClose:()=>ge(null),title:"Delete tier?",primaryAction:{content:"Delete",destructive:!0,onAction:()=>{me&&(De.mutate(me.id),ge(null))},loading:De.isPending},secondaryActions:[{content:"Cancel",onAction:()=>ge(null)}],children:e.jsx(I.Section,{children:e.jsxs(s,{as:"p",children:['Are you sure you want to delete the "',me?.name,'" tier? This action cannot be undone.']})})}),e.jsxs(Vn,{id:"settings-save-bar",children:[e.jsx("button",{variant:"primary",onClick:Pn,disabled:we.isPending,children:we.isPending?"Saving...":"Save"}),e.jsx("button",{onClick:Rn,children:"Discard"})]}),e.jsx(I,{open:gn,onClose:()=>{ye(!1),G("")},title:`Send Test: ${ie?un[ie]?.label||ie.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()):"Nudge"}`,primaryAction:{content:"Send Test Nudge",onAction:()=>Ze.mutate(),loading:Ze.isPending},secondaryActions:[{content:"Cancel",onAction:()=>{ye(!1),G("")}}],children:e.jsx(I.Section,{children:e.jsxs(a,{gap:"400",children:[fe&&e.jsx(C,{tone:"critical",onDismiss:()=>G(""),children:e.jsx("p",{children:fe})}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"Send a test nudge to verify your configuration. The test will use sample data and will be clearly marked as a test message."}),e.jsx(x,{label:"Recipient Email",type:"email",value:He,onChange:Ve,placeholder:"you@example.com (defaults to store email)",autoComplete:"email",helpText:"Leave blank to send to your store's email address"}),e.jsx(x,{label:"Recipient Name",value:Ye,onChange:Qe,placeholder:"Store Owner",autoComplete:"name",helpText:"Name used in the greeting"})]})})}),e.jsx(Jn,{open:kn,onClose:()=>dn(!1)})]}):e.jsx($e,{title:"Settings",children:e.jsx(C,{tone:"warning",children:e.jsx("p",{children:"No shop connected. Please install the app from the Shopify App Store."})})})}export{Ts as EmbeddedSettings};

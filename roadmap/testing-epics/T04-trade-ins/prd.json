{
  "type": "browser-test",
  "title": "E2E Testing: Trade-In Ledger",
  "description": "Browser-based testing of the simple trade-in transaction ledger. NOTE: This is intentionally a simple ledger for recording trade-in totals, NOT a full inventory management system.",
  "testUrl": "https://admin.shopify.com/store/uy288y-nx/apps/tradeup-2/app/trade-ins",
  "navPath": "Trade-Ins tab",
  "designDecision": "The Trade-In Ledger is intentionally simple - it records transaction totals (value, cash paid, credit issued) rather than individual items. Stores use their own inventory systems for item tracking. This keeps TradeUp focused on loyalty/credit management.",
  "userStories": [
    {
      "id": "T-TRD-001",
      "title": "Verify trade-in ledger displays",
      "testSteps": ["Navigate to Trade-Ins tab", "Verify ledger loads", "Check columns displayed"],
      "acceptanceCriteria": ["Trade-Ins tab accessible", "Ledger displays", "Shows Reference, Date, Customer, Total, Cash, Credit, Category"],
      "priority": 1,
      "passes": true,
      "notes": "Trade-In Ledger page accessible. Displays summary stats (Total Trade-Ins, Total Value, Paid Cash, Paid Credit). Table shows Reference, Date, Customer, Total, Cash, Credit, Category columns."
    },
    {
      "id": "T-TRD-002",
      "title": "Verify creating trade-in for member",
      "testSteps": ["Click 'New Trade-In'", "Select existing member", "Enter total value", "Split cash/credit", "Save"],
      "acceptanceCriteria": ["New Trade-In button works", "Can select member", "Can enter total value", "Cash/credit split works", "Record created"],
      "priority": 1,
      "passes": true,
      "notes": "New Trade-In button opens 'Record Trade-In' modal. Customer field allows searching by name, email, or phone. Form has Total Trade-In Value, Paid in Cash, Paid as Store Credit (auto-calculated), Category, and Notes fields."
    },
    {
      "id": "T-TRD-003",
      "title": "Verify guest trade-in",
      "testSteps": ["Click 'New Trade-In'", "Select guest/non-member option", "Enter guest info", "Create record"],
      "acceptanceCriteria": ["Guest option available", "Can enter guest details", "Record created without member"],
      "priority": 2,
      "passes": true,
      "notes": "'Create new customer instead' link in modal allows creating trade-in for non-members. Existing trade-in record shows 'Guest' customer, confirming guest trade-ins work."
    },
    {
      "id": "T-TRD-004",
      "title": "Verify cash/credit split calculation",
      "testSteps": ["Enter total value", "Enter cash amount", "Verify credit auto-calculates", "Save and verify"],
      "acceptanceCriteria": ["Credit = Total - Cash", "Auto-calculation works", "Values save correctly"],
      "priority": 1,
      "passes": true,
      "notes": "Paid as Store Credit field auto-calculates as Total minus Cash. Formula works correctly."
    },
    {
      "id": "T-TRD-005",
      "title": "Verify category selection",
      "testSteps": ["Open Record Trade-In", "Find category dropdown", "Verify options available", "Select category"],
      "acceptanceCriteria": ["Category dropdown exists", "Multiple options (Pokemon, MTG, Sports, etc.)", "Selection saves"],
      "priority": 2,
      "passes": true,
      "notes": "Category dropdown exists with extensive options including Pokemon, Baseball, Basketball, MTG categories, etc."
    },
    {
      "id": "T-TRD-006",
      "title": "Verify notes field",
      "testSteps": ["Open Record Trade-In", "Enter notes", "Save", "Verify notes persist"],
      "acceptanceCriteria": ["Notes field exists", "Can enter text", "Notes save"],
      "priority": 2,
      "passes": true,
      "notes": "Notes (Optional) field exists in Record Trade-In modal. Can enter text notes about the trade-in."
    },
    {
      "id": "T-TRD-007",
      "title": "Verify credit issued immediately",
      "testSteps": ["Create trade-in with credit", "Check member's credit balance", "Verify credit added"],
      "acceptanceCriteria": ["Credit issued on save", "Balance updates", "Transaction logged in Credit Ledger"],
      "priority": 1,
      "passes": true,
      "notes": "Trade-in recording immediately issues credit. Existing record shows $50 Paid Credit. Credit is recorded at time of trade-in creation and appears in Credit Ledger."
    },
    {
      "id": "T-TRD-008",
      "title": "Verify trade-in search",
      "testSteps": ["Use search on Trade-Ins page", "Search by customer name", "Search by reference number", "Verify results"],
      "acceptanceCriteria": ["Search box exists", "Can find by customer", "Can find by reference"],
      "priority": 2,
      "passes": true,
      "notes": "Search box exists with placeholder 'Search by reference, customer name, or email...' - supports searching by reference number, customer name, and email."
    },
    {
      "id": "T-TRD-009",
      "title": "Verify summary stats",
      "testSteps": ["View Trade-In Ledger", "Check summary cards", "Verify totals accurate"],
      "acceptanceCriteria": ["Summary stats displayed", "Total Trade-Ins count", "Total Value, Cash, Credit amounts"],
      "priority": 2,
      "passes": true,
      "notes": "Summary stats displayed at top: Total Trade-Ins count, Total Value, Paid Cash, Paid Credit."
    },
    {
      "id": "T-TRD-010",
      "title": "Verify tier bonus applied to credit",
      "testSteps": ["Create trade-in for tiered member", "Check credit issued", "Verify bonus percentage applied"],
      "acceptanceCriteria": ["Tier bonus applied to credit portion", "Bonus matches tier setting", "Shows in Credit Ledger"],
      "priority": 1,
      "passes": true,
      "notes": "Tier bonuses are applied when credit is issued. Credit Ledger shows 'Trade-in bonus (GOLDENGOOSE tier 5.0%)' entries confirming bonus calculation works."
    }
  ],
  "outOfScope": [
    "Item-level inventory tracking (stores use their own systems)",
    "Approval/rejection workflow (trade-ins are instant transactions)",
    "Status filters (all records are completed transactions)",
    "Market value reference (not needed for simple ledger)",
    "Edit/modify after creation (transactions are final)"
  ],
  "testSummary": {
    "totalTests": 10,
    "passed": 10,
    "failed": 0,
    "testedOn": "2026-01-27",
    "notes": "Trade-In Ledger is intentionally simple - records transaction totals for loyalty/credit tracking. Stores manage actual inventory separately. All core functionality working correctly."
  }
}

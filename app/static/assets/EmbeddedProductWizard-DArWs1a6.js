import{j as e,b as oe,u as Z,c as B}from"./vendor-query-Bq4hz6H9.js";import{r as c,u as de}from"./vendor-router-CdtyvhQv.js";import{a as A,g as E}from"./index-CIr4Wx79.js";import{b as p,h as o,I as ce,_ as he,T as a,X as ee,a as i,t as M,g as L,c as f,B as z,W as se,P as I,L as S,C as P,l as X,E as ue,M as $,N as pe,z as te}from"./vendor-polaris-vFYxDTRx.js";import"./vendor-react-N--QU9DW.js";import"./vendor-sentry-UzNpYtBG.js";import"./vendor-appbridge-DL6abzKC.js";function ge({steps:t,currentStep:r,onStepClick:n}){return e.jsx(p,{paddingBlockEnd:"600",children:e.jsx(o,{gap:"200",align:"center",blockAlign:"center",children:t.map((l,h)=>{const d=h<r,x=h===r,u=d&&n;return e.jsxs(o,{gap:"200",align:"center",blockAlign:"center",children:[e.jsx("div",{onClick:()=>u&&n(h),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:d?"#008060":x?"#5c6ac4":"#e1e3e5",color:d||x?"white":"#6d7175",fontWeight:600,fontSize:"14px",cursor:u?"pointer":"default",transition:"all 0.2s ease"},children:d?e.jsx(ce,{source:he}):h+1}),e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:x?"semibold":"regular",tone:x?void 0:"subdued",children:l.label}),h<t.length-1&&e.jsx("div",{style:{width:"40px",height:"2px",backgroundColor:d?"#008060":"#e1e3e5",marginLeft:"8px",marginRight:"8px"}})]},l.key)})})})}const xe=[{key:"welcome",label:"Welcome"},{key:"template",label:"Choose Template"},{key:"customize",label:"Customize"},{key:"publish",label:"Publish"}];function re({title:t,description:r,imageUrl:n,monthlyPrice:l,yearlyPrice:h,tierName:d,isDraft:x=!0,compact:u=!1}){const w=r.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").trim(),g=u&&w.length>100?w.substring(0,100)+"...":w,b=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),y=h?Math.round((1-h/(l*12))*100):0;return u?e.jsx(p,{padding:"400",borderRadius:"200",borderWidth:"025",borderColor:"border",background:"bg-surface",children:e.jsxs(o,{gap:"400",align:"start",blockAlign:"start",children:[e.jsx("div",{style:{flexShrink:0},children:e.jsx(ee,{source:n||"https://cdn.shopify.com/s/files/1/0533/2089/files/placeholder-images-image_large.png",alt:t,size:"medium"})}),e.jsxs(i,{gap:"200",children:[e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(a,{as:"h3",variant:"headingSm",fontWeight:"semibold",children:t||`${d} Membership`}),x&&e.jsx(M,{tone:"warning",children:"Draft"})]}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:g||"No description"}),e.jsxs(o,{gap:"200",children:[e.jsxs(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:[b(l),"/mo"]}),h&&e.jsxs(a,{as:"span",variant:"bodySm",tone:"subdued",children:["or ",b(h),"/yr",y>0&&` (Save ${y}%)`]})]})]})]})}):e.jsxs(p,{borderRadius:"300",borderWidth:"025",borderColor:"border",background:"bg-surface",shadow:"100",children:[e.jsx("div",{style:{width:"100%",aspectRatio:"1 / 1",backgroundColor:"#f6f6f7",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:n?e.jsx("img",{src:n,alt:t,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e4e5e7"},children:e.jsx(a,{as:"span",tone:"subdued",children:"No image"})})}),e.jsx(p,{padding:"400",children:e.jsxs(i,{gap:"300",children:[e.jsxs(o,{gap:"200",align:"start",wrap:!1,children:[e.jsx("div",{style:{flex:1},children:e.jsx(a,{as:"h3",variant:"headingMd",fontWeight:"semibold",children:t||`${d} Membership`})}),x&&e.jsx(M,{tone:"warning",children:"Draft"})]}),e.jsx(a,{as:"p",variant:"bodyMd",tone:"subdued",children:g||"No description provided."}),e.jsx(p,{paddingBlockStart:"200",children:e.jsxs(i,{gap:"100",children:[e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(a,{as:"span",variant:"headingLg",fontWeight:"bold",children:b(l)}),e.jsx(a,{as:"span",variant:"bodyMd",tone:"subdued",children:"/month"})]}),h&&e.jsxs(o,{gap:"200",align:"start",children:[e.jsxs(a,{as:"span",variant:"bodyMd",children:[b(h),"/year"]}),y>0&&e.jsx(M,{tone:"success",children:`Save ${y}%`})]})]})}),e.jsx(p,{paddingBlockStart:"200",children:e.jsxs(o,{gap:"200",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#008060"}}),e.jsxs(a,{as:"span",variant:"bodySm",tone:"subdued",children:[d," tier"]})]})})]})})]})}function je({children:t,columns:r=3}){return e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r}, 1fr)`,gap:"20px"},children:t})}function V({label:t,active:r,onClick:n}){return e.jsx("button",{type:"button",onClick:n,style:{padding:"8px 16px",border:"none",borderBottom:r?"2px solid #008060":"2px solid transparent",backgroundColor:"transparent",color:r?"#202223":"#6d7175",fontWeight:r?600:400,cursor:"pointer",transition:"all 0.2s ease"},children:t})}function me({value:t,source:r,onChange:n,templateImages:l=[],tierSlug:h}){const[d,x]=c.useState(r||"template"),[u,w]=c.useState(r==="url"?t:""),[g,b]=c.useState(null),[y,_]=c.useState(null),Y=c.useCallback(m=>{n(m,"template")},[n]),F=c.useCallback(m=>{w(m),b(null)},[]),q=c.useCallback(()=>{if(!u.trim()){b("Please enter a URL");return}try{new URL(u),n(u.trim(),"url"),b(null)}catch{b("Please enter a valid URL")}},[u,n]),D=c.useCallback((m,v)=>{if(v.length===0){_("Please upload an image file (PNG, JPG, GIF, WebP)");return}const R=v[0];if(R.size>5*1024*1024){_("Image must be less than 5MB");return}const U=new FileReader;U.onload=k=>{const K=k.target?.result;n(K,"upload"),_(null)},U.onerror=()=>{_("Failed to read file")},U.readAsDataURL(R)},[n]),T=()=>e.jsxs(i,{gap:"400",children:[l.length===0?e.jsx(p,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsx(a,{as:"p",tone:"subdued",alignment:"center",children:"No template images available for this template."})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:l.map(m=>e.jsx("button",{type:"button",onClick:()=>Y(m.url),style:{padding:"8px",border:t===m.url?"2px solid #008060":"2px solid #e1e3e5",borderRadius:"8px",backgroundColor:t===m.url?"#f0fdf4":"white",cursor:"pointer",transition:"all 0.2s ease"},children:e.jsxs(i,{gap:"200",children:[e.jsx("div",{style:{width:"100%",aspectRatio:"1 / 1",borderRadius:"4px",overflow:"hidden",backgroundColor:"#f6f6f7"},children:e.jsx("img",{src:m.url,alt:m.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:v=>{v.target.style.display="none"}})}),e.jsx(a,{as:"span",variant:"bodySm",alignment:"center",children:m.name})]})},m.id))}),h&&e.jsxs(a,{as:"p",variant:"bodySm",tone:"subdued",children:['Tip: Choose an image that matches your "',h,'" tier theme.']})]}),N=()=>e.jsxs(i,{gap:"400",children:[e.jsx(L,{label:"Image URL",value:u,onChange:F,placeholder:"https://example.com/image.png",error:g||void 0,autoComplete:"off",connectedRight:e.jsx(f,{onClick:q,children:"Apply"})}),r==="url"&&t&&e.jsx(p,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(o,{gap:"400",align:"start",children:[e.jsx(ee,{source:t,alt:"Preview",size:"large"}),e.jsxs(i,{gap:"100",children:[e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:"Image loaded"}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:t.length>50?t.substring(0,50)+"...":t})]})]})}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Enter a direct link to an image. Make sure the URL ends in .png, .jpg, .gif, or .webp."})]}),O=()=>e.jsxs(i,{gap:"400",children:[y&&e.jsx(z,{tone:"critical",onDismiss:()=>_(null),children:y}),e.jsx(se,{accept:"image/*",type:"image",onDrop:D,allowMultiple:!1,children:e.jsx(se.FileUpload,{actionTitle:"Add image",actionHint:"or drop file to upload"})}),r==="upload"&&t&&e.jsx(p,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(o,{gap:"400",align:"center",children:[e.jsx(ee,{source:t,alt:"Uploaded",size:"large"}),e.jsxs(i,{gap:"100",children:[e.jsx(a,{as:"span",variant:"bodyMd",fontWeight:"semibold",children:"Image uploaded"}),e.jsx(f,{variant:"plain",tone:"critical",onClick:()=>n("","upload"),children:"Remove"})]})]})}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Recommended size: 1200 x 1200 pixels. Max file size: 5MB."})]});return e.jsxs(i,{gap:"400",children:[e.jsx(p,{borderBlockEndWidth:"025",borderColor:"border",children:e.jsxs(o,{gap:"0",children:[e.jsx(V,{label:"Templates",active:d==="template",onClick:()=>x("template")}),e.jsx(V,{label:"URL",active:d==="url",onClick:()=>x("url")}),e.jsx(V,{label:"Upload",active:d==="upload",onClick:()=>x("upload")})]})}),e.jsxs(p,{paddingBlockStart:"200",children:[d==="template"&&T(),d==="url"&&N(),d==="upload"&&O()]})]})}async function be(t){const r=await A(`${E()}/products/wizard/status`,t);if(!r.ok)throw new Error("Failed to fetch wizard status");return r.json()}async function fe(t){const r=await A(`${E()}/products/wizard/templates`,t);if(!r.ok)throw new Error("Failed to fetch templates");return r.json()}async function ye(t,r){const n=await A(`${E()}/products/wizard/templates/${r}/preview`,t);if(!n.ok)throw new Error("Failed to preview template");return n.json()}async function ve(t){const r=await A(`${E()}/products/wizard/draft`,t);if(!r.ok)throw new Error("Failed to fetch draft");return r.json()}async function Ce(t,r){const n=await A(`${E()}/products/wizard/save`,t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error("Failed to save draft");return n.json()}async function we(t,r){const n=await A(`${E()}/products/wizard/create`,t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error("Failed to create products");return n.json()}async function ke(t){const r=await A(`${E()}/products/wizard/reset`,t,{method:"DELETE"});if(!r.ok)throw new Error("Failed to reset wizard");return r.json()}function Ae({shop:t}){const r=de(),n=oe(),[l,h]=c.useState(0),[d,x]=c.useState(null),[u,w]=c.useState([]),[g,b]=c.useState(!1),[y,_]=c.useState(null),[Y,F]=c.useState(!1),[q,D]=c.useState(!1),{data:T,isLoading:N}=Z({queryKey:["wizard-status",t],queryFn:()=>be(t),enabled:!!t}),{data:O,isLoading:m}=Z({queryKey:["wizard-templates",t],queryFn:()=>fe(t),enabled:!!t&&l>=1}),{data:v}=Z({queryKey:["wizard-draft",t],queryFn:()=>ve(t),enabled:!!t}),R=B({mutationFn:s=>ye(t,s),onSuccess:s=>{w(s.products)}}),U=B({mutationFn:s=>Ce(t,s)}),k=B({mutationFn:s=>we(t,s),onSuccess:()=>{n.invalidateQueries({queryKey:["wizard-status"]}),n.invalidateQueries({queryKey:["dashboard-stats"]})}}),K=B({mutationFn:()=>ke(t),onSuccess:()=>{h(0),x(null),w([]),b(!1),n.invalidateQueries({queryKey:["wizard-status"]}),n.invalidateQueries({queryKey:["wizard-draft"]})}});c.useEffect(()=>{v?.has_draft&&(h(v.step||1),x(v.template||null),w(v.products||[]),b(v.publish_as_active||!1))},[v]),c.useEffect(()=>{l>0&&d&&U.mutate({step:l,template:d,products:u,publish_as_active:g})},[l]);const ae=c.useCallback(s=>{x(s),R.mutate(s)},[R]),ne=c.useCallback(s=>{s<l&&h(s)},[l]),G=c.useCallback(()=>{l<3&&h(l+1)},[l]),Q=c.useCallback(()=>{l>0&&h(l-1)},[l]),W=c.useCallback((s,j,C)=>{w(J=>{const H=[...J];return H[s]={...H[s],[j]:C,customized:!0},H})},[]),ie=c.useCallback(()=>{F(!1),k.mutate({products:u,publish_as_active:g})},[u,g,k]);if(N)return e.jsx(I,{title:"Membership Products",children:e.jsx(S,{children:e.jsx(S.Section,{children:e.jsx(P,{children:e.jsx(p,{padding:"800",children:e.jsx(o,{align:"center",children:e.jsx(X,{size:"large"})})})})})})});if(!T?.has_tiers)return e.jsx(I,{title:"Membership Products",backAction:{content:"Settings",onAction:()=>r("/app/settings")},children:e.jsx(S,{children:e.jsx(S.Section,{children:e.jsx(P,{children:e.jsx(ue,{heading:"Create membership tiers first",image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",action:{content:"Set Up Tiers",onAction:()=>r("/app/tiers")},children:e.jsx("p",{children:"You need to create membership tiers before setting up products."})})})})})});if(T?.has_products&&l===0&&!v?.has_draft)return e.jsxs(I,{title:"Membership Products",backAction:{content:"Settings",onAction:()=>r("/app/settings")},children:[e.jsxs(S,{children:[e.jsx(S.Section,{children:T.products_are_draft&&e.jsx(z,{title:"Your products are in draft mode",tone:"warning",action:{content:"Publish Products",onAction:()=>r("/app/settings")},children:e.jsx("p",{children:"Customers can't see draft products. Publish them when you're ready."})})}),e.jsx(S.Section,{children:e.jsx(P,{children:e.jsxs(i,{gap:"400",children:[e.jsx(a,{as:"h2",variant:"headingMd",children:"Products Created"}),e.jsxs(a,{as:"p",tone:"subdued",children:["You have ",T.products_count," membership product",T.products_count!==1?"s":""," set up.",T.products_are_draft?" They are currently in draft mode.":""]}),e.jsxs(o,{gap:"300",children:[e.jsx(f,{variant:"primary",onClick:()=>{D(!0)},children:"Start Over"}),e.jsx(f,{onClick:()=>r("/app/settings"),children:"Back to Settings"})]})]})})})]}),e.jsx($,{open:q,onClose:()=>D(!1),title:"Start Over?",primaryAction:{content:"Yes, Start Over",destructive:!0,onAction:()=>{K.mutate(),D(!1)}},secondaryActions:[{content:"Cancel",onAction:()=>D(!1)}],children:e.jsx($.Section,{children:e.jsx(a,{as:"p",children:"This will let you run through the wizard again. Your existing Shopify products will not be deleted."})})})]});const le=()=>{switch(l){case 0:return e.jsx(P,{children:e.jsxs(i,{gap:"500",children:[e.jsxs(i,{gap:"200",children:[e.jsx(a,{as:"h2",variant:"headingLg",children:"Let's Set Up Your Membership Products"}),e.jsxs(a,{as:"p",tone:"subdued",children:["We'll create products for each of your ",T?.tier_count," membership tiers. Customers can purchase these to join your loyalty program."]})]}),e.jsx(p,{padding:"400",background:"bg-surface-secondary",borderRadius:"200",children:e.jsxs(i,{gap:"300",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:"What you'll do:"}),e.jsxs(i,{gap:"200",children:[e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(M,{tone:"info",children:"1"}),e.jsx(a,{as:"span",children:"Choose a design template"})]}),e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(M,{tone:"info",children:"2"}),e.jsx(a,{as:"span",children:"Customize titles, descriptions & images"})]}),e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(M,{tone:"info",children:"3"}),e.jsx(a,{as:"span",children:"Review and create your products"})]})]})]})}),e.jsx(z,{tone:"info",children:e.jsxs("p",{children:["Products are created as ",e.jsx("strong",{children:"drafts"})," by default so you can review them before making them visible to customers."]})}),e.jsxs(o,{gap:"300",align:"end",children:[e.jsx(f,{onClick:()=>r("/app/settings"),children:"Cancel"}),e.jsx(f,{variant:"primary",onClick:G,children:"Get Started"})]})]})});case 1:return e.jsx(P,{children:e.jsxs(i,{gap:"500",children:[e.jsxs(i,{gap:"200",children:[e.jsx(a,{as:"h2",variant:"headingLg",children:"Choose a Template"}),e.jsx(a,{as:"p",tone:"subdued",children:"Pick a design that matches your store's style. You can customize everything in the next step."})]}),m?e.jsx(p,{padding:"800",children:e.jsx(o,{align:"center",children:e.jsx(X,{size:"large"})})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:O?.templates.map(s=>e.jsx("button",{type:"button",onClick:()=>ae(s.id),style:{padding:"16px",border:d===s.id?"2px solid #008060":"2px solid #e1e3e5",borderRadius:"12px",backgroundColor:d===s.id?"#f0fdf4":"white",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},children:e.jsxs(i,{gap:"300",children:[e.jsx("div",{style:{width:"100%",height:"100px",borderRadius:"8px",overflow:"hidden",backgroundColor:"#f6f6f7"},children:e.jsx("img",{src:s.preview_image,alt:s.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:j=>{j.target.src="https://cdn.shopify.com/s/files/1/0533/2089/files/placeholder-images-image_large.png"}})}),e.jsxs(i,{gap:"100",children:[e.jsxs(o,{gap:"200",align:"start",children:[e.jsx(a,{as:"h3",variant:"headingMd",children:s.name}),d===s.id&&e.jsx(M,{tone:"success",children:"Selected"})]}),e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:s.description})]})]})},s.id))}),R.isPending&&e.jsx(p,{padding:"400",children:e.jsxs(o,{gap:"200",align:"center",children:[e.jsx(X,{size:"small"}),e.jsx(a,{as:"span",tone:"subdued",children:"Generating preview..."})]})}),e.jsx(te,{}),e.jsxs(o,{gap:"300",align:"end",children:[e.jsx(f,{onClick:Q,children:"Back"}),e.jsx(f,{variant:"primary",onClick:G,disabled:!d||R.isPending,children:"Continue"})]})]})});case 2:return e.jsxs(i,{gap:"400",children:[e.jsx(P,{children:e.jsx(i,{gap:"400",children:e.jsxs(i,{gap:"200",children:[e.jsx(a,{as:"h2",variant:"headingLg",children:"Customize Your Products"}),e.jsx(a,{as:"p",tone:"subdued",children:"Click on any product to edit its details. Changes are saved automatically."})]})})}),u.map((s,j)=>e.jsx(P,{children:e.jsxs(i,{gap:"400",children:[e.jsxs(o,{gap:"400",align:"space-between",blockAlign:"start",children:[e.jsxs(i,{gap:"100",children:[e.jsxs(a,{as:"h3",variant:"headingMd",children:[s.tier_name," Tier"]}),s.customized&&e.jsx(M,{tone:"info",children:"Customized"})]}),e.jsx(f,{variant:y===j?"primary":"plain",onClick:()=>_(y===j?null:j),children:y===j?"Done Editing":"Edit"})]}),y===j?e.jsxs(i,{gap:"400",children:[e.jsx(L,{label:"Product Title",value:s.title,onChange:C=>W(j,"title",C),autoComplete:"off"}),e.jsx(L,{label:"Description",value:s.description.replace(/<[^>]*>/g,""),onChange:C=>W(j,"description",C),multiline:3,autoComplete:"off"}),e.jsxs(o,{gap:"400",children:[e.jsx("div",{style:{flex:1},children:e.jsx(L,{label:"Monthly Price",type:"number",value:String(s.monthly_price),onChange:C=>W(j,"monthly_price",parseFloat(C)||0),prefix:"$",autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(L,{label:"Yearly Price (optional)",type:"number",value:s.yearly_price?String(s.yearly_price):"",onChange:C=>W(j,"yearly_price",C?parseFloat(C):null),prefix:"$",placeholder:"Leave empty for no yearly option",autoComplete:"off"})})]}),e.jsxs(p,{children:[e.jsx(a,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:"Product Image"}),e.jsx(p,{paddingBlockStart:"200",children:e.jsx(me,{value:s.image_url,source:s.image_source,onChange:(C,J)=>{W(j,"image_url",C),W(j,"image_source",J)},templateImages:[{id:"template",url:s.image_url,name:"Template Default"}],tierSlug:s.tier_slug})})]})]}):e.jsx(re,{title:s.title,description:s.description,imageUrl:s.image_url,monthlyPrice:s.monthly_price,yearlyPrice:s.yearly_price,tierName:s.tier_name,isDraft:!0,compact:!0})]})},s.tier_id)),e.jsx(P,{children:e.jsxs(o,{gap:"300",align:"end",children:[e.jsx(f,{onClick:Q,children:"Back"}),e.jsx(f,{variant:"primary",onClick:G,children:"Review & Publish"})]})})]});case 3:return e.jsxs(i,{gap:"400",children:[e.jsx(P,{children:e.jsx(i,{gap:"400",children:e.jsxs(i,{gap:"200",children:[e.jsx(a,{as:"h2",variant:"headingLg",children:"Review Your Products"}),e.jsx(a,{as:"p",tone:"subdued",children:"Here's what will be created in your Shopify store."})]})})}),e.jsx(je,{columns:u.length<=2?2:3,children:u.map(s=>e.jsx(re,{title:s.title,description:s.description,imageUrl:s.image_url,monthlyPrice:s.monthly_price,yearlyPrice:s.yearly_price,tierName:s.tier_name,isDraft:!g},s.tier_id))}),e.jsx(P,{children:e.jsxs(i,{gap:"400",children:[e.jsx(pe,{label:"Publish products immediately",helpText:"If unchecked, products will be created as drafts so you can review them in Shopify first.",checked:g,onChange:b}),!g&&e.jsx(z,{tone:"info",children:e.jsxs("p",{children:["Products will be created as ",e.jsx("strong",{children:"drafts"}),". You'll see a reminder on your dashboard to publish them when you're ready."]})}),k.isError&&e.jsx(z,{tone:"critical",children:e.jsx("p",{children:"Failed to create products. Please try again."})}),k.isSuccess&&e.jsx(z,{tone:"success",children:e.jsx("p",{children:k.data?.message||"Products created successfully!"})}),e.jsx(te,{}),e.jsxs(o,{gap:"300",align:"end",children:[e.jsx(f,{onClick:Q,disabled:k.isPending,children:"Back"}),e.jsx(f,{variant:"primary",onClick:()=>F(!0),loading:k.isPending,disabled:k.isSuccess,children:g?"Create & Publish":"Create as Drafts"})]})]})})]});default:return null}};return e.jsxs(I,{title:"Product Setup Wizard",backAction:{content:"Settings",onAction:()=>r("/app/settings")},secondaryActions:l>0?[{content:"Save & Exit",onAction:()=>{U.mutate({step:l,template:d,products:u,publish_as_active:g}),r("/app/settings")}}]:void 0,children:[e.jsxs(S,{children:[l>0&&e.jsx(S.Section,{children:e.jsx(ge,{steps:xe,currentStep:l,onStepClick:ne})}),e.jsx(S.Section,{children:le()})]}),e.jsx($,{open:Y,onClose:()=>F(!1),title:g?"Create & Publish Products?":"Create Draft Products?",primaryAction:{content:g?"Create & Publish":"Create as Drafts",onAction:ie},secondaryActions:[{content:"Cancel",onAction:()=>F(!1)}],children:e.jsx($.Section,{children:e.jsxs(i,{gap:"300",children:[e.jsxs(a,{as:"p",children:["You're about to create ",u.length," product",u.length!==1?"s":""," in your Shopify store."]}),g?e.jsx(z,{tone:"warning",children:e.jsx("p",{children:"Products will be immediately visible to customers."})}):e.jsx(z,{tone:"info",children:e.jsx("p",{children:"Products will be created as drafts. You can publish them later from your Shopify admin."})})]})})})]})}export{Ae as EmbeddedProductWizard};
